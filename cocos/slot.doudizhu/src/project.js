window.__require=function t(e,n,i){function o(a,c){if(!n[a]){if(!e[a]){var l=a.split("/");if(l=l[l.length-1],!e[l]){var h="function"==typeof __require&&__require;if(!c&&h)return h(l,!0);if(s)return s(l,!0);throw new Error("Cannot find module '"+a+"'")}}var r=n[a]={exports:{}};e[a][0].call(r.exports,function(t){return o(e[a][1][t]||t)},r,r.exports,t,e,n,i)}return n[a].exports}for(var s="function"==typeof __require&&__require,a=0;a<i.length;a++)o(i[a]);return o}({Actions:[function(t,e,n){"use strict";cc._RF.push(e,"932ecTYswJDJrxqN7CIHEKo","Actions");cc.Class({extends:cc.Component,statics:{SOCKET_REQUEST:"SOCKET_REQUEST",SOCKET_RESPONSE:"SOCKET_RESPONSE",MODEL_UPDATE_PROP:"MODEL_UPDATE_PROP",VIEW_BUTTON_CLICKED:"VIEW_BUTTON_CLICKED",ACTION_BETWEEN_CTRL:"ACTION_BETWEEN_CTRL",ACTION_FROM_VIEW:"ACTION_FROM_VIEW",ACTION_FROM_CTRL:"ACTION_FROM_CTRL"}});cc.log("CLASS Event Loaded"),cc._RF.pop()},{}],Actor:[function(t,e,n){"use strict";cc._RF.push(e,"81f5audWPNFoooNzje9Pi+w","Actor");var i=t("../RandomMove"),o=t("Bar");cc.Class({extends:i,properties:{animeMoveName:{default:"",displayName:"\u79fb\u52d5\u52d5\u756b\u540d\u7a31"},animeThrowName:{default:"",displayName:"\u4e1f\u64f2\u52d5\u756b\u540d\u7a31"},animeHitAndDeadName:{default:"",displayName:"\u88ab\u6253\u64ca\u7684\u52d5\u756b\u53ca\u6b7b\u4ea1\u52d5\u756b\u540d\u7a31"},animeStopName:{default:"",displayName:"\u505c\u6b62\u52d5\u756b\u540d\u7a31"},actorIndex:{default:1,displayName:"\u89d2\u8272\u7d22\u5f15"},bloodBar:{default:null,type:o,displayName:"\u8840\u689d"},recoverTime:{default:1,displayName:"\u5fa9\u539f\u6642\u9593"},throwWeaponEvent:{default:[],type:[cc.Component.EventHandler],displayName:"\u4e1f\u64f2\u6b66\u5668\u4e8b\u4ef6"},hitteEventHandler:{default:[],type:[cc.Component.EventHandler],displayName:"\u88ab\u64ca\u5230\u4e8b\u4ef6"},bIsHitted:{default:!1,visible:!1},bIsDead:{default:!1,visible:!1},deadEventHandler:{default:[],type:[cc.Component.EventHandler],displayName:"\u89d2\u8272\u6b7b\u4ea1\u4e8b\u4ef6"}},onLoad:function(){this.animation=this.node.getChildByName("actor").getComponent("cc.Animation")},setInitBlood:function(t){0!=t&&(this.bloodBar.initValue=t,this.updateBloodBar(t))},setRecoverTime:function(t){0!=t&&(this.recoverTime=t)},randomMoveX:function(){this.animation.play(this.animeMoveName),this._super()},randomStopX:function(){""!==this.animeStopName&&this.animation.play(this.animeStopName)},emitThrowWeaponEvent:function(){for(var t=0;t<this.throwWeaponEvent.length;t++)this.throwWeaponEvent[t].emit([])},emitHittedEvent:function(t){for(var e=0;e<this.hitteEventHandler.length;e++)this.hitteEventHandler[e].emit([t])},onCollisionEnter:function(t,e){this.bIsHitted||this.bIsDead||(this.bIsHitted=!0,this.emitHittedEvent(t.node.getComponent("Weapon").attackPower+this.actorIndex),t.node.getComponent("Weapon").hide(),this.onHitted(t.node.getComponent("Weapon").attackPower))},onHitted:function(t){this.node.stopAllActions(),this.animation.play(this.animeHitAndDeadName),this.node.runAction(cc.sequence(cc.delayTime(this.recoverTime),cc.callFunc(this.onHittedEnd,this)))},onHittedEnd:function(){this.bIsHitted=!1},emitDeadEvent:function(){for(var t=0;t<this.deadEventHandler.length;t++)this.deadEventHandler[t].emit([])},gameOver:function(){this.node.stopAllActions(),this.node.active=!1,this.bIsDead=!1,this.bIsHitted=!1},updateBloodBar:function(t){this.bloodBar.currentValue=t,0===t&&(this.bIsDead=!0,this.node.stopAllActions(),this.animation.stop(this.animeMoveName),cc.log(this.node.name,"isDead"),this.emitDeadEvent())}}),cc._RF.pop()},{"../RandomMove":"RandomMove",Bar:"Bar"}],Animal:[function(t,e,n){"use strict";cc._RF.push(e,"aa9aaL0fqFFg6ZoNRybgCuL","Animal"),cc.Class({extends:cc.Component,properties:{moveRange:{default:null,type:cc.Node},animeStopName:{default:""},animeMoveName:{default:""},initDirection:{default:-1,displayName:"\u65b9\u5411(1:\u5411\u53f3,-1\u5411\u5de6)"},randomMoveSpeed:{default:25,displayName:"\u96a8\u6a5f\u79fb\u52d5\u901f\u5ea6(pixel/sec)"},randomMoveStopTime:{default:1,displayName:"\u96a8\u6a5f\u505c\u6b62\u6642\u9593"},isShow:{default:!1,visible:!1},moveCrossTime:{default:1,displayName:"\u7a7f\u8d8a\u756b\u9762\u6240\u9700\u6642\u9593"},moveCrossEndHandler:{default:[],type:[cc.Component.EventHandler],displayName:"\u7a7f\u8d8a\u756b\u9762\u7d50\u675f\u4e8b\u4ef6"},animalType:{default:0},explodingTime:{default:1,visible:!1,displayName:"\u7206\u70b8\u52d5\u756b\u6642\u9593"},explodingSpeed:{default:50,visible:!1,displayName:"\u7206\u70b8\u901f\u5ea6(pixel/sec)"},explodingEventHandler:{default:[],type:[cc.Component.EventHandler],displayName:"\u7206\u70b8\u4e8b\u4ef6"}},onLoad:function(){this.initScaleX=this.node.scaleX,this.initScaleY=this.node.scaleY,this.initPosition=this.node.position,this.animation=this.node.getComponent("cc.Animation"),this.explodingTime=.8,this.explodingSpeed=260},show:function(){this.node.active=!0,this.isShow=!0,this.node.opacity=255},hide:function(){this.node.active=!1,this.isShow=!1,this.node.stopAllActions(),this.node.position=this.initPosition},randomMove:function(){cc.log("Super Random Move")},randomMoveX:function(){""!==this.animeMoveName&&this.animation.playAdditive(this.animeMoveName);var t=(this.moveRange.width-this.node.width)/2,e=cc.random0To1()*t*2-t;e<=this.node.x?this.node.scaleX=this.initDirection>0?-1*this.initScaleX:this.initScaleX:this.node.scaleX=this.initDirection>0?this.initScaleX:-1*this.initScaleX;var n=cc.moveTo(Math.abs(e-this.node.x)/this.randomMoveSpeed,e,this.node.y);this.node.runAction(cc.sequence(n,cc.callFunc(this.playStopAnimae,this),cc.delayTime(this.randomMoveStopTime),cc.callFunc(this.randomMoveX,this)))},moveCross:function(){""!==this.animeMoveName&&this.animation.playAdditive(this.animeMoveName);var t=this.moveRange.width+this.node.width,e=-t/2+Math.round(cc.random0To1())*t,n=void 0;e>0?(this.node.scaleX=this.initDirection>0?-1*this.initScaleX:this.initScaleX,n=-t/2):(this.node.scaleX=this.initDirection>0?this.initScaleX:-1*this.initScaleX,n=t/2),this.node.x=e,this.show();var i=cc.moveTo(this.moveCrossTime,new cc.Vec2(n,this.node.y));this.node.runAction(cc.sequence(i,cc.callFunc(this.moveCrossEnd,this)))},moveCrossEnd:function(){for(var t=0;t<this.moveCrossEndHandler.length;t++)this.moveCrossEndHandler[t].emit([])},playStopAnimae:function(){this.animation.stop(),""!==this.animeStopName&&this.animation.play(this.animeStopName)},playExplodingAction:function(t){var e=void 0;this.node.stopAllActions(),this.animation.stop(),this.emitExplodingEvent();e=t>0?[this.node.position,new cc.Vec2(this.node.x+1*this.explodingSpeed*this.explodingTime*.8,this.node.y+this.explodingSpeed*this.explodingTime*0),new cc.Vec2(this.node.x+1*this.explodingSpeed*this.explodingTime,this.node.y+this.explodingSpeed*this.explodingTime*.1)]:[this.node.position,new cc.Vec2(this.node.x-1*this.explodingSpeed*this.explodingTime*.8,this.node.y+this.explodingSpeed*this.explodingTime*0),new cc.Vec2(this.node.x-1*this.explodingSpeed*this.explodingTime,this.node.y+this.explodingSpeed*this.explodingTime*.1)],cc.log("Explot To:::"+e);var n=cc.sequence(cc.fadeOut(.5*this.explodingTime),cc.callFunc(this.onExplodeEnd,this));this.node.runAction(cc.spawn(cc.bezierTo(this.explodingTime,e).easing(cc.easeExponentialOut(1.2*this.explodingTime)),n))},emitExplodingEvent:function(){for(var t=0;t<this.explodingEventHandler.length;t++)this.explodingEventHandler[t].emit([])},onExplodeEnd:function(){this.hide(),this.node.position=this.initPosition},onCollisionEnter:function(t){cc.log("other position:::"+t.node.position);var e=this.node.x>=t.node.x?1:-1;this.playExplodingAction(e)},onCollisionStay:function(t){},onCollisionExit:function(){}}),cc._RF.pop()},{}],Audio:[function(t,e,n){"use strict";cc._RF.push(e,"9a6aemUxi5CRrmwjmZxfR6N","Audio");var i=cc.Class({extends:cc.Component,editor:{executeInEditMode:!1},statics:{__ON_ASSETS_READY__:"__ON_ASSETS_READY__",__ASSETS_IS_READY__:!1,__AUDIO_URLS__:[],__AUDIO_SOURCES__:[],__MUSIC_CLIP_ID__:null,__MUSIC_VOLUME__:1,__MUSIC_IS_MUTE__:!1,playMusic:function(t){if(i.__ASSETS_IS_READY__){var e=i.__MUSIC_IS_MUTE__?0:i.__MUSIC_VOLUME__;i.stopMusic(),i.__AUDIO_URLS__.forEach(function(n){if(String(n.name).match(t))return i.__MUSIC_CLIP_ID__=cc.audioEngine.playMusic(n,!0),void cc.audioEngine.setVolume(i.__MUSIC_CLIP_ID__,e)},this)}else cc.game.once(i.__ON_ASSETS_READY__,function(e){i.playMusic(t)})},pauseMusic:function(){cc.audioEngine.pause(i.__MUSIC_CLIP_ID__)},resumeMusic:function(){cc.audioEngine.resume(i.__MUSIC_CLIP_ID__)},stopMusic:function(){cc.audioEngine.stop(i.__MUSIC_CLIP_ID__)},setMusicVolume:function(t){i.__MUSIC_VOLUME__=t,cc.audioEngine.setVolume(i.__MUSIC_CLIP_ID__,i.__MUSIC_VOLUME__)},getMusicVolume:function(){return i.__MUSIC_VOLUME__},muteMusic:function(){i.__MUSIC_IS_MUTE__=!i.__MUSIC_IS_MUTE__;var t=i.__MUSIC_IS_MUTE__?0:i.__MUSIC_VOLUME__;cc.audioEngine.setVolume(i.__MUSIC_CLIP_ID__,t),window.isMuteMusic=i.__MUSIC_IS_MUTE__},__SOUND_CLIPS__:[],__SOUND_VOLUME__:1,__SOUND_IS_MUTE__:!1,__REMOVE_CLIP__:function(t){i.__SOUND_CLIPS__.forEach(function(e,n,i){e.id!=t||i.splice(n,1)})},playSound:function(t){if(i.__ASSETS_IS_READY__){var e=i.__SOUND_IS_MUTE__?0:i.__SOUND_VOLUME__;i.__AUDIO_URLS__.forEach(function(n){if(String(n.name).match(t)){var o=cc.audioEngine.play(n,!1);return cc.audioEngine.setVolume(o,e),void i.__SOUND_CLIPS__.push({id:o,name:t})}},this)}else cc.game.once(i.__ON_ASSETS_READY__,function(e){i.playSound(t)})},stopSound:function(t){i.__SOUND_CLIPS__.forEach(function(e){e.name==t&&cc.audioEngine.stop(e.id)})},pauseSound:function(t){i.__SOUND_CLIPS__.forEach(function(e){e.name==t&&cc.audioEngine.pause(e.id)})},resumeSound:function(t){i.__SOUND_CLIPS__.forEach(function(e){e.name==t&&cc.audioEngine.resume(e.id)})},setSoundVolume:function(t){i.__SOUND_VOLUME__=t,i.__SOUND_CLIPS__.forEach(function(t){cc.audioEngine.setVolume(t.id,i.__SOUND_VOLUME__)}),i.__AUDIO_SOURCES__.forEach(function(t){t.volume=i.__SOUND_VOLUME__})},getSoundVolume:function(){return i.__SOUND_VOLUME__},muteSound:function(){i.__SOUND_IS_MUTE__=!i.__SOUND_IS_MUTE__;var t=i.__SOUND_IS_MUTE__?0:i.__SOUND_VOLUME__;i.__SOUND_CLIPS__.forEach(function(e){cc.audioEngine.setVolume(e.id,t)}),i.__AUDIO_SOURCES__.forEach(function(t){t.mute=i.__SOUND_IS_MUTE__}),window.isSoundMute=i.__SOUND_IS_MUTE__}}});cc.director.once(cc.Director.EVENT_AFTER_SCENE_LAUNCH,function(){var t=[];cc.director.getScene().children.forEach(function(e){t=t.concat(e.getComponentsInChildren(cc.AudioSource))}),i.__AUDIO_SOURCES__=t,cc.loader.loadResDir?cc.loader.loadResDir("audios",function(t,e){i.__AUDIO_URLS__=e,i.__ASSETS_IS_READY__=!0,cc.game.emit(i.__ON_ASSETS_READY__)}):cc.loader.loadResAll("audios",function(t,e){i.__AUDIO_URLS__=e,i.__ASSETS_IS_READY__=!0,cc.game.emit(i.__ON_ASSETS_READY__)})},void 0),cc._RF.pop()},{}],BGAudio:[function(t,e,n){"use strict";cc._RF.push(e,"2e74bz4IaBP7LwbaBuYOkyU","BGAudio"),window.isMuteMusic=!1,window.isSoundMute=!1,cc.Class({extends:cc.Component,properties:{clickAudioSFX:{default:null,type:cc.AudioClip,displayName:"Click \u97f3\u6548"},mouseBakcSFX:{default:null,type:cc.AudioClip,displayName:"\u8001\u9f20\u56de\u7c60\u97f3\u6548"},eagleFlyDownSFX:{default:null,type:cc.AudioClip,displayName:"\u8001\u9df9\u98db\u4e0b\u4f86\u97f3\u6548"},eagleTakeCageSFX:{default:null,type:cc.AudioClip,displayName:"\u8001\u9df9\u63d0\u8d77\u9f20\u7c60\u97f3\u6548"},dogBarkSFX:{default:null,type:cc.AudioClip,displayName:"\u72d7\u53eb\u8072"},mouseExplodinSFX:{default:null,type:cc.AudioClip,displayName:"\u8001\u9f20\u7206\u70b8\u97f3\u6548"},wormExplodingSFX:{default:null,type:cc.AudioClip,displayName:"\u87f2\u7206\u70b8\u97f3\u6548"},sparrowExplodingSFX:{default:null,type:cc.AudioClip,displayName:"\u9ebb\u96c0\u7206\u70b8\u97f3\u6548"},bombDroppingSFX:{default:null,type:cc.AudioClip,displayName:"\u70b8\u5f48\u6389\u843d\u97f3\u6548"},bombExplodingSFX:{default:null,type:cc.AudioClip,displayName:"\u70b8\u5f48\u7206\u70b8\u97f3\u6548"},changeWeaponSFX:{default:null,type:cc.AudioClip,displayName:"\u5207\u63db\u6b66\u5668\u97f3\u6548"},hittedSFX:{default:null,type:cc.AudioClip,displayName:"\u64ca\u4e2d\u97f3\u6548"},throwWeaponSFX:{default:null,type:cc.AudioClip,displayName:"\u4e1f\u6b66\u5668\u97f3\u6548"},BGMClip:{default:null,type:cc.AudioClip,displayName:"BG\u80cc\u666f\u97f3\u6a02"},spawnCoinSFX:{default:null,type:cc.AudioClip,displayName:"\u5674\u91d1\u5e63\u97f3\u6548"}},onLoad:function(){cc.log("this.BGMClip::::"+this.BGMClip)},toggleMusicIsMute:function(){window.isMuteMusic=!window.isMuteMusic,cc.log("IsMuteMusic",window.isMuteMusic)},playBGM:function(){this.BGMClip&&(cc.audioEngine.stopMusic(),cc.audioEngine.stopAll(),0==window.isMuteMusic&&cc.audioEngine.playMusic(this.BGMClip,!0))},stopBGM:function(){cc.audioEngine.stopMusic(),cc.audioEngine.stopAll(),cc.log("SSSSSSSSSSSSSSSSSSSSSSSSSSSSS")},playClickAudio:function(){this.clickAudioSFX&&0==window.isSoundMute&&cc.audioEngine.playEffect(this.clickAudioSFX)},playSpawnCoinSFX:function(){this.spawnCoinSFX&&0==window.isSoundMute&&cc.audioEngine.playEffect(this.spawnCoinSFX)},playMouseBackCageAudio:function(){this.mouseBakcSFX&&0==window.isSoundMute&&cc.audioEngine.playEffect(this.mouseBakcSFX)},playEagleFlyDownAudio:function(){this.eagleFlyDownSFX&&0==window.isSoundMute&&cc.audioEngine.playEffect(this.eagleFlyDownSFX)},playEagleTakeCageAudio:function(){this.eagleTakeCageSFX&&0==window.isSoundMute&&cc.audioEngine.playEffect(this.eagleTakeCageSFX)},playSparrowExplodingAudio:function(){this.sparrowExplodingSFX&&0==window.isSoundMute&&cc.audioEngine.playEffect(this.sparrowExplodingSFX)},playMouseExplodingAudio:function(){this.mouseExplodinSFX&&0==window.isSoundMute&&cc.audioEngine.playEffect(this.mouseExplodinSFX)},playWormExplodingAudio:function(){this.wormExplodingSFX&&0==window.isSoundMute&&cc.audioEngine.playEffect(this.wormExplodingSFX)},playBombDroppingAudio:function(){this.bombDroppingSFX&&0==window.isSoundMute&&cc.audioEngine.playEffect(this.bombDroppingSFX)},playBombExplodingAudio:function(){this.bombExplodingSFX&&0==window.isSoundMute&&cc.audioEngine.playEffect(this.bombExplodingSFX)},playDogBarkAudio:function(){this.dogBarkSFX&&0==window.isSoundMute&&cc.audioEngine.playEffect(this.dogBarkSFX)},playChangeWeaponAudio:function(){this.changeWeaponSFX&&0==window.isSoundMute&&cc.audioEngine.playEffect(this.changeWeaponSFX)},playHittedAudio:function(){this.hittedSFX&&0==window.isSoundMute&&cc.audioEngine.playEffect(this.hittedSFX)},playThrowWeaponAudio:function(){this.throwWeaponSFX&&0==window.isSoundMute&&cc.audioEngine.playEffect(this.throwWeaponSFX)}}),cc._RF.pop()},{}],Bar:[function(t,e,n){"use strict";cc._RF.push(e,"1b2c2crTu5EabkoMoYDAY0z","Bar"),cc.Class({extends:cc.Component,properties:{initValue:{default:200,displayName:"\u521d\u59cb\u503c"},boundWidth:{default:157,displayName:"\u986f\u793a\u7bc4\u570d\u5bec\u5ea6"},currentValue:{get:function(){return void 0!==this._currentValue?this._currentValue:this.initValue},set:function(t){t<0&&(t=0),t>=this.initValue&&(t=this.initValue),this._currentValue=t,this.setValue(t)},displayName:"\u7576\u524d\u503c"},bound:{default:null,type:cc.Node}},onLoad:function(){},reset:function(){this.currentValue=this.initValue},setValue:function(t){this.bound.width=t/this.initValue*this.boundWidth}}),cc._RF.pop()},{}],BigDog:[function(t,e,n){"use strict";cc._RF.push(e,"ddaf2aAVn1FR4osEUg32JTJ","BigDog");cc.Class({extends:cc.Component,properties:{bigDogBarkAnimeEndHandler:{default:[],type:[cc.Component.EventHandler]},dogBarkEventHandler:{default:[],displayName:"\u72d7\u53eb\u4e8b\u4ef6",type:[cc.Component.EventHandler]}},onLoad:function(){this.animation=this.node.getComponent("cc.Animation")},playDogBark:function(){this.iBarkCount=0,this.node.active=!0,this.playAnimation("BG2_BIG_DOG_BARK")},onAnimeEnd:function(t){this.emitDogBarkAnimeEndEvent()},onDogBark:function(){cc.log("Dog Bark"),this.emitDogBarkEvent()},emitDogBarkEvent:function(){for(var t=0;t<this.dogBarkEventHandler.length;t++)this.dogBarkEventHandler[t].emit([])},emitDogBarkAnimeEndEvent:function(){for(var t=0;t<this.bigDogBarkAnimeEndHandler.length;t++)this.bigDogBarkAnimeEndHandler[t].emit([])},playAnimation:function(t){this.animation.play(t)}}),cc._RF.pop()},{}],BombController:[function(t,e,n){"use strict";cc._RF.push(e,"a49b8fP7rxMmrBXpeef0kX/","BombController"),cc.Class({extends:cc.Component,properties:{initEventHandler:{default:[],type:[cc.Component.EventHandler]}},onLoad:function(){},init:function(){this.emitInitEvent()},emitInitEvent:function(){for(var t=0;t<this.initEventHandler.length;t++)this.initEventHandler[t].emit([])}}),cc._RF.pop()},{}],BombView:[function(t,e,n){"use strict";cc._RF.push(e,"b8aaffNOwZJnbTJGo0uUnEU","BombView"),cc.Class({extends:cc.Component,onDropEnd:function(){cc.log("OnDropEnd::::")},properties:{bomb:{default:null,type:cc.Node},exploding:{default:null,type:cc.Node},dropping:{default:null,type:cc.Node},bombDroppingEventHandler:{default:[],type:[cc.Component.EventHandler],displayName:"\u70b8\u5f48\u6389\u843d\u4e8b\u4ef6"},bombExplodingEventHandler:{default:[],type:[cc.Component.EventHandler],displayName:"\u70b8\u5f48\u7206\u70b8\u4e8b\u4ef6"}},onLoad:function(){},setBombDroppingTime:function(t){this.droppingTime=t,this.dropping&&(this.dropping.getComponent(cc.Animation).defaultClip.speed=0!=t?1/t:1)},setBombExplodingTime:function(t){this.exploding&&(this.exploding.getComponent(cc.Animation).defaultClip.speed=0!=t?1/t:1)},setCollisionRange:function(t){this.exploding&&(this.exploding.getComponent(cc.CircleCollider).radius=200*t)},enableCollision:function(t){cc.director.getCollisionManager().enabled=t},enable:function(t){t?(this.node.on("mousemove",this.onMouseMove,this),this.node.on("touchmove",this.onMouseMove,this),this.node.on("touchstart",this.onMouseDown,this),this.node.on("touchend",this.onMouseUp,this)):(this.node.off("mousemove",this.onMouseMove,this),this.node.off("touchmove",this.onMouseMove,this),this.node.off("touchstart",this.onMouseDown,this),this.node.off("touchend",this.onMouseUp,this))},gameWaitStart:function(t){this.node.active=!0,this.showHideBomb(!1),this.showHideDropingBomb(!1),this.showHideExploding(!1),this.enable(!1),this.enableCollision(!1),this.exploding.getComponent("Exploding").gameWaitStart(),this.bomb.x=0,this.setBombDroppingTime(t.bombDropTime),this.setBombExplodingTime(t.bombExplodeTime),this.setCollisionRange(t.bombRange),this.calmDownTime=t.bombCDTime},gameStart:function(){cc.log("BombView gameStart"),this.node.active=!0,this.showHideBomb(!0),this.playTakingBomb(),this.showHideDropingBomb(!1),this.showHideExploding(!1),this.enable(!0)},gameSettle:function(){this.node.stopAllActions(),this.showHideBomb(!1),this.showHideDropingBomb(!1),this.showHideExploding(!1),this.enable(!1),this.enableCollision(!1),this.node.active=!1},showBomb:function(){this.showHideBomb(!0)},hideBomb:function(){this.showHideBomb(!1)},showHideBomb:function(t){this.bomb.active=t},showHideDropingBomb:function(t){this.dropping.active=t},showHideExploding:function(t){this.exploding.active=t},playTakingBomb:function(){this.bomb.getComponent("cc.Animation").play("bombTaking")},playDroppingBomb:function(){this.enable(!1),this.emitBombDroppingEvent(),this.dropping.x=this.bomb.x,this.bombPosition=this.dropping.x,this.bomb.getComponent("cc.Animation").play("bombDrop"),this.showHideDropingBomb(!0),this.dropAnimeState=this.dropping.getComponent("cc.Animation").play()},playExplodingBomb:function(){this.showHideDropingBomb(!1),this.emitBombExplodingEvent(),this.exploding.x=this.dropping.x;var t=cc.sequence(cc.callFunc(this.showHideBomb,this,[!1]),cc.delayTime(this.calmDownTime),cc.callFunc(this.playTakingBomb,this),cc.callFunc(this.showHideBomb,this,[!0]),cc.callFunc(this.enable,this,[!0]));this.node.runAction(t),this.showHideExploding(!0),this.explodingAnimeState=this.exploding.getComponent("cc.Animation").play()},onMouseDown:function(t){cc.log("onMouseDown"),this.setBombPositoin(t),this.playTakingBomb()},onMouseUp:function(t){cc.log("onMouseUp"),this.setBombPositoin(t),this.playDroppingBomb()},onMouseMove:function(t){this.setBombPositoin(t)},setBombPositoin:function(t){var e=this.node.convertToNodeSpaceAR(t.getLocation());this.bomb.x=e.x,this.bomb.x>=(this.node.width-this.bomb.width)/2&&(this.bomb.x=(this.node.width-this.bomb.width)/2),this.bomb.x<=-(this.node.width-this.bomb.width)/2&&(this.bomb.x=-(this.node.width-this.bomb.width)/2)},emitBombDroppingEvent:function(){for(var t=0;t<this.bombDroppingEventHandler.length;t++)this.bombDroppingEventHandler[t].emit([])},emitBombExplodingEvent:function(){for(var t=0;t<this.bombExplodingEventHandler.length;t++)this.bombExplodingEventHandler[t].emit([])},update:function(t){void 0!=this.dropAnimeState&&!1===this.dropAnimeState.isPlaying&&(this.dropAnimeState=null,this.playExplodingBomb()),void 0!=this.explodingAnimeState&&!1===this.explodingAnimeState.isPlaying&&(this.explodingAnimeState=null)}}),cc._RF.pop()},{}],Bonus01View:[function(t,e,n){"use strict";cc._RF.push(e,"b2c138DxcBJaZQdqbVDWg3B","Bonus01View");var i=t("Eagle"),o=t("Mouse"),s=(t("StartGame"),t("SpawnCoin")),a=t("../BonusView"),c=t("../SettleView");cc.Class({extends:a,properties:{startBtn:{type:cc.Node,default:null},introWord:{type:cc.Node,default:null},waitChoiceBtn:{type:cc.Node,default:null},cageBtns:{default:[],type:[cc.Button]},cageHints:{default:[],type:[cc.Node],displayName:"\u6309\u9215\u63d0\u793a"},cages:{default:[],type:[cc.Node]},eagle:{default:null,type:i},eagleNumObj:{default:null,type:cc.Node},eagleNum:{default:10,visible:!1},maxEagleNum:{default:2,visible:!0},mouseNumObj:{default:null,type:cc.Node},mouseGetScore:{default:null,type:cc.Node,displayName:"\u8001\u9f20\u8d0f\u5206\u52d5\u756b\u7269\u4ef6"},mouseZeroScore:{default:null,type:cc.Node,displayName:"\u8001\u9f20\u96f6\u5206\u52d5\u756b\u7269\u4ef6"},mouseNum:15,mousePrefab:{default:null,type:cc.Prefab},maxMouseNum:20,mouses:{default:[],type:[o],visible:!1},waitTimeForMoveBackToCage:{default:2},settleView:{default:null,type:c},multiples:{default:1,displayName:"\u5f69\u91d1\u500d\u6578",tooltip:"BG\u7684\u5f69\u91d1\u500d\u6578\u4f9dSymbol\u6578\u4e0d\u540c"},spawnCoinPrefab:{default:null,type:cc.Prefab},spawnCoins:{default:null,type:s,visible:!1},settleTime:{default:2},mask:{default:null,type:cc.Node},farmer:{default:null,type:cc.Node,displayName:"\u8fb2\u592b\u52d5\u756b(\u6703\u5728\u5674\u91d1\u5e63\u6642\u51fa\u73fe)"},container:{default:null,type:cc.Node},requesSpinHandler:{default:[],type:[cc.Component.EventHandler]},gameRoundStartEventHandler:{default:[],type:[cc.Component.EventHandler]},gameOverEventHandler:{default:[],type:[cc.Component.EventHandler]}},onLoad:function(){cc.log("OnLoad"),this.eagleLabel=this.eagleNumObj.getComponentInChildren("cc.Label"),cc.log("this.eagleLabel:::"+this.eagleNumObj),this.mouseLabel=this.mouseNumObj.getComponentInChildren("cc.Label"),this.mouseInCageNumber=0,this.roundWin=0},start:function(){},gameWaitStart:function(t){cc.log("init data",t),t&&(this.eagleNum=t.choose,this.settleView.multiples=t.multiply),this.node.active=!0,this.waitChoiceBtn.active=!1,this.startBtn.active=!0,this.mouseGetScore.active=!1,this.mouseZeroScore.active=!1,this.farmer&&this.farmer.getComponent("ShowHide").hide(),null!==this.cages&&this.showCages(!0),null!==this.cageBtns&&(this.showHideCageBtn(!0),this.enableCageBtn(!1)),null!==this.eagle&&(this.eagle.showEagle(!1),this.eagle.stopRandomMove()),null!==this.eagleLabel&&(cc.log("EagleLable::"+this.eagleLabel),this.eagleNum=this.maxEagleNum,this.showEageNum(!1,this.eagleNum)),null!==this.mouseLabel&&(this.mouseNum=0,this.showMouseNum(!1,this.mouseNum)),null!==this.mousePrefab&&(this._removeAllMouse(),this.generateMouse(this.maxMouseNum)),null!==this.settleView&&this.showSettlePoint(!1,[100]);for(var e=0;e<this.cageHints.length;e++)this.cageHints[e].getComponentInChildren("cc.Animation").setCurrentTime(0);this.showBtnHints(!0),this.introWord&&(this.introWord.active=!0)},gameStart:function(t){cc.log("Touch StartGame"),this.introWord&&(this.introWord.active=!1),this.startBtn.active=!1,this.enableCageBtn(!1),this.showEageNum(!0,this.eagleNum),this.showMouseNum(!0,this.mouseNum),this.eagle.showEagle(!0),this.eagle.startRandomMove(),cc.log("Start Move Back to Cage"),this.startCallMouseBackToCage()},gameWaitPickChoice:function(){this.gameWaitPickCage()},gameWaitPickCage:function(){this.showBtnHints(!0),this.emitGameRoundStartEvent(),this.waitChoiceBtn.active=!1,this.enableCageBtn(!0)},gameWaitShowSettle:function(){cc.log("Enter Wait Show Settle"),this.enableCageBtn(!1),this.eagle.stopRandomMove(),cc.director.getScheduler().schedule(this.gameShowSettle,this,1,0)},gameShowSettle:function(){cc.log("Enter Show Settile"),this.showBtnHints(!1),cc.director.getScheduler().unschedule(this.gameShowSettle,this),this.enableCageBtn(!1),this.eagle.showEagle(!1),this.eagle.stopRandomMove(),this.showEageNum(!1,this.eagleNum),this.showMouseNum(!1,this.eagleNum),this.showSettlePoint(!0,[this.mouseNum]),cc.director.getScheduler().schedule(this.gameSpawnCoin,this,this.settleTime,0)},gameSpawnCoin:function(){if(cc.log("Eneter SpawnCoin"),cc.director.getScheduler().unschedule(this.gameSpawnCoin,this),0==this.mouseNum)return this.emitGameOverEvent(),void(this.node.active=!1);this.node.getComponent("BGAudio").playSpawnCoinSFX(),this.farmer.getComponent("ShowHide").show(),this.farmer.getComponent("PlayStop").play(),this.spawnCoins=cc.instantiate(this.spawnCoinPrefab).getComponent("SpawnCoin"),this.spawnCoins.node.parent=this.mask,this.spawnCoins.node.on("SpawnCoinAnimeEnd",this.onSpawnCoinAnimeEnd,this),this.spawnCoins.playAnime()},onSpawnCoinAnimeEnd:function(){this.emitGameOverEvent(),this.node.active=!1,cc.log("SpawnCoin Anime End")},generateMouse:function(t){for(var e=0;e<t;e++)cc.log("Generate Mouse"),this.mouses.push(this.createMouse(this.container,e));cc.log("Mouse Length----:"+this.mouses.length)},createMouse:function(e,n){t("Mouse");var i=null;i=cc.instantiate(this.mousePrefab).getComponent("Mouse"),cc.pool.putInPool(i);var o=cc.random0To1()*this.cages.length;return o=Math.floor(o),i.leftBoundPosition=this.cageBtns[n%6].node,i.node.x=this.container.width/2*cc.random0To1()+20,i.node.y=i.leftBoundPosition.y-50-20*cc.random0To1(),e.addChild(i.node),i.node.setGlobalZOrder(-5),i.startRandomMove(),i},enableCageBtn:function(t){for(var e=0;e<this.cageBtns.length;e++)t?!0===this.cages[e].active?this.cageBtns[e].interactable=t:this.cageHints[e].active=!1:this.cageBtns[e].interactable=t},showHideCageBtn:function(t){for(var e=0;e<this.cageBtns.length;e++)this.cageBtns[e].visible=t},showEageNum:function(t,e,n){if(cc.log("ShowEagelNumber::"+e),this.eagleNumObj.active=t,this.eagleLabel.string="x"+e,n&&t){var i=this.eagleLabel.node.scaleX,o=this.eagleLabel.node.scaleY;this.eagleLabel.node.scaleX=2*i,this.eagleLabel.node.scaleY=2*o;var s=this.eagleLabel.node.getDisplayedColor();this.eagleLabel.node.color=new cc.Color(255,0,0);var a=cc.tintTo(.2,s);this.eagleLabel.node.runAction(cc.spawn(cc.scaleTo(.2,i,o),a))}},showMouseNum:function(t,e,n){if(this.mouseNumObj.active=t,this.mouseLabel.string="x"+e,n&&t){var i=this.mouseLabel.node.scaleX,o=this.mouseLabel.node.scaleY;this.mouseLabel.node.scaleX=2*i,this.mouseLabel.node.scaleY=2*o;var s=this.mouseLabel.node.getDisplayedColor();this.mouseLabel.node.color=new cc.Color(255,0,0);var a=cc.tintTo(.2,s);this.mouseLabel.node.runAction(cc.spawn(cc.scaleTo(.2,i,o),a))}},showCages:function(t){for(var e=0;e<this.cages.length;e++)this.cages[e].active=t},showSettlePoint:function(t,e){this.settleView.updateSettleWithServer([e],[this.settleView.multiples],[this.totalWin]),this.settleView.node.active=t},startCallMouseBackToCage:function(){this.moveBackCount=0;for(var t=0;t<this.mouses.length;t++)this.mouses[t].node.on("moveFinish",this.onMouseMoveBackToCageFinished,this),this.mouses[t].startMoveToCage();this.node.getComponent("BGAudio").playMouseBackCageAudio()},showCatchMouseCage:function(t){this.clickIndex<0?cc.log("No Click Cage"):(this.enableCageBtn(!1),this.eagle.target=this.cages[this.clickIndex],this.mouseInCageNumber=t,cc.log("Get Mouse Num:::"+this.mouseInCageNumber),this.mouseNum+=this.mouseInCageNumber,this.bornMouseInCage(),this.eagle.startMoveToTarget(),this.node.getComponent("BGAudio").playEagleFlyDownAudio())},bornMouseInCage:function(){for(var t=0;t<this.mouseInCageNumber;t++){var e=cc.instantiate(this.mousePrefab);e.x=0,e.y=0,this.mouses.push(e.getComponent("Mouse")),this.cages[this.clickIndex].addChild(e),this.cages[this.clickIndex].getChildByName("back").setLocalZOrder(0),e.setLocalZOrder(1),this.cages[this.clickIndex].getChildByName("front").setLocalZOrder(2)}},showBtnHints:function(t,e,n){if(e)this.cageHints[e].active=t;else for(var i=0;i<this.cageHints.length&&(!this.cageHints[i].active||!t);i++)this.cageHints[i].active=t,t&&this.cageHints[i].getComponentInChildren("cc.Animation").play("btnHint")},getRandomMouseInCageNum:function(){return Math.floor(3*cc.random0To1())},onCountDownEnd:function(){for(var t=0;t<this.cageBtns.length;t++)if(1==this.cageBtns[t].interactable){this.cageBtns[t].interactable=!1,this.clickIndex=t;break}this.emitRequestSpin()},onEagleCatchMouseAnimeEnd:function(t){cc.log("CatchMouseAnimeEnd"),this.eagleNum>0?this.gameWaitPickCage():this.gameWaitShowSettle()},onMouseMoveBackToCageFinished:function(t){t.currentTarget.off("moveFinish",this.onMouseMoveBackToCageFinished,this),this.moveBackCount++,this.moveBackCount==this.mouses.length&&(this._removeAllMouse(),this.gameWaitPickChoice())},_removeAllMouse:function(){for(var t=this.mouses.length,e=0;e<t;e++){var n=this.mouses.pop();n.node.removeFromParent(!0),n=null}},onClickCagesBtn:function(t){cc.log(t),this.clickIndex=this.findClickCageBtn(t.currentTarget),this.clickIndex>=0&&(this.emitRequestSpin(),this.cageBtns[this.clickIndex].interactable=!1,this.showBtnHints(!1),this.enableCageBtn(!1)),cc.log("clicked---::"+this.clickIndex)},onServerReplySpin:function(t){var e=t.count;cc.log("MouseNumber",e),this.eagleNum=t.chance,cc.log("EagleNumber",this.eagleNum),this.showEageNum(!0,this.eagleNum,!0),this.totalWin=t.totalChips,cc.log("totalWin",this.totalWin),this.roundWin=t.roundChips,cc.log("roundWin",this.roundWin),this.clickIndex>=0?(this.winPoint=e,this.showCatchMouseCage(e)):this.eagleNum>0?this.gameWaitPickCage():this.gameWaitShowSettle()},emitRequestSpin:function(){for(var t=this.clickIndex+1,e=0;e<this.requesSpinHandler.length;e++)this.requesSpinHandler[e].emit([t])},emitGameRoundStartEvent:function(){for(var t=0;t<this.gameRoundStartEventHandler.length;t++)this.gameRoundStartEventHandler[t].emit([])},emitGameOverEvent:function(){for(var t=0;t<this.gameOverEventHandler.length;t++)this.gameOverEventHandler[t].emit([this.totalWin])},onClickWaitChoice:function(t){this.gameWaitPickCage()},updateMouseNum:function(){this.showMouseNum(!0,this.mouseNum,!0),0==this.winPoint?(this.mouseZeroScore.active=!0,this.mouseZeroScore.getComponent("cc.Animation").play()):(this.mouseGetScore.active=!0,this.mouseGetScore.getComponent("cc.Animation").play())},findClickCageBtn:function(t){for(var e=-1,n=0;n<this.cageBtns.length;n++)if(t.name==this.cageBtns[n].node.name){e=n;break}return e}}),cc._RF.pop()},{"../BonusView":"BonusView","../SettleView":"SettleView",Eagle:"Eagle",Mouse:"Mouse",SpawnCoin:"SpawnCoin",StartGame:"StartGame"}],Bonus02View:[function(t,e,n){"use strict";cc._RF.push(e,"cab79lku6tLSbnXtgkX7T4x","Bonus02View");var i=t("Dog"),o=t("Cow"),s=(t("StartGame"),t("SpawnCoin")),a=t("../BonusView"),c=t("../SettleView");cc.Class({extends:a,properties:{startBtn:{type:cc.Node,default:null},waitChoiceBtn:{type:cc.Node,default:null},introWord:{default:null,type:cc.Node},bigDog:{type:cc.Node,default:null},cageBtns:{default:[],type:[cc.Button]},cageHints:{default:[],type:[cc.Node],displayName:"\u725b\u820d\u6309\u9215\u63d0\u793a"},cages:{default:[],type:[cc.Node]},dog:{default:null,type:i},dogNumObj:{default:null,type:cc.Node},dogNum:{default:10,visible:!1},maxDogNum:{default:2,visible:!0},cowNumObj:{default:null,type:cc.Node},cowGetScore:{default:null,type:cc.Node,displayName:"\u4e73\u725b\u8d0f\u5206\u52d5\u756b\u7269\u4ef6"},cowZeroScore:{default:null,type:cc.Node,displayName:"\u4e73\u725b\u96f6\u5206\u52d5\u756b\u7269\u4ef6"},cowNum:15,maxCowNum:20,cowes:{default:[],type:[o],visible:!1},settleView:{default:null,type:c},multiples:{default:1,displayName:"\u5f69\u91d1\u500d\u6578",tooltip:"BG\u7684\u5f69\u91d1\u500d\u6578\u4f9dSymbol\u6578\u4e0d\u540c"},spawnCoinPrefab:{default:null,type:cc.Prefab},spawnCoins:{default:null,type:s,visible:!1},settleTime:{default:2},cowPrefab:{default:null,type:cc.Prefab},container:{type:cc.Node,default:null},mask:{default:null,type:cc.Node},farmer:{default:null,type:cc.Node,displayName:"\u8fb2\u592b\u52d5\u756b(\u6703\u5728\u5674\u91d1\u5e63\u6642\u51fa\u73fe)"},requesSpinHandler:{default:[],type:[cc.Component.EventHandler]},gameOverEventHandler:{default:[],type:[cc.Component.EventHandler]},gameRoundStartEventHandler:{default:[],type:[cc.Component.EventHandler]}},onLoad:function(){this.dogLabel=this.dogNumObj.getComponentInChildren("cc.Label"),this.cowLabel=this.cowNumObj.getComponentInChildren("cc.Label"),this.bornCowNumber=0,this.iMoveOutCount=0},start:function(){},gameWaitStart:function(t){cc.log("init data",t),this.node.active=!0,t&&(this.maxDogNum=t.choose,this.settleView.getComponent("SettleView").multiples=t.multiply),null!==this.startBtn&&(this.startBtn.active=!0),this.farmer&&this.farmer.getComponent("ShowHide").hide(),null!==this.bigDog&&this.showBigDog(!1),this.cowGetScore.active=!1,this.cowZeroScore.active=!1,null!==this.cages&&this.showCages(!0),null!==this.cageBtns&&(this.enableCageBtn(!1),this.showHideCageBtn(!0)),null!==this.dog&&this.dog.showDog(!1),null!==this.dogLabel&&(this.dogNum=this.maxDogNum,this.showDogNum(!1,this.dogNum)),null!==this.cowLabel&&(this.cowNum=0,this.showCowNum(!1,this.cowNum)),null!==this.settleView&&this.showSettlePoint(!1,0),this.waitChoiceBtn.active=!1,this.removeAllCows(),this.iMoveOutCount=0,this.cowes=[],this.closeAllDoor(),this.showBtnHints(!0),this.introWord&&(this.introWord.active=!0)},gameStart:function(t){cc.log("Touch StartGame"),this.introWord&&(this.introWord.active=!1),this.iMoveOutCount=0,this.startBtn&&(this.startBtn.active=!1),this.enableCageBtn(!1),this.showDogNum(!1,this.dogNum),this.showCowNum(!0,this.cowNum),this.dog.showDog(!0),this.dog.playDogBark()},gameWaitPickChoice:function(){this.gameWaitPickCage()},gameWaitPickCage:function(){this.waitChoiceBtn.active=!1,this.showBtnHints(!0),this.dog.showDog(!0),this.enableCageBtn(!0),this.emitGameRoundStartEvent()},gameRoundEnd:function(){},gameWaitShowSettle:function(){cc.log("Enter Wait Show Settle"),this.enableCageBtn(!1),cc.director.getScheduler().schedule(this.gameShowSettle,this,1,0)},gameShowSettle:function(){cc.log("Enter Show Settile"),this.showBigDog(!1),cc.director.getScheduler().unschedule(this.gameShowSettle,this),this.showBtnHints(!1),this.enableCageBtn(!1),this.showDogNum(!1,this.dogNum),this.showCowNum(!1,this.cowNum),this.showSettlePoint(!0,this.cowNum),cc.director.getScheduler().schedule(this.gameSpawnCoin,this,this.settleTime,0)},gameSpawnCoin:function(){if(cc.log("Eneter SpawnCoin"),cc.director.getScheduler().unschedule(this.gameSpawnCoin,this),0===this.cowNum)return this.node.active=!1,void this.emitGameOverEvent();this.node.getComponent("BGAudio").playSpawnCoinSFX(),this.farmer.getComponent("ShowHide").show(),this.farmer.getComponent("PlayStop").play(),this.spawnCoins=cc.instantiate(this.spawnCoinPrefab).getComponent("SpawnCoin"),this.spawnCoins.node.parent=this.mask,this.spawnCoins.node.on("SpawnCoinAnimeEnd",this.onSpawnCoinAnimeEnd,this),this.spawnCoins.playAnime()},onSpawnCoinAnimeEnd:function(){this.spawnCoins.node.off("SpawnCoinAnimeEnd",this.onSpawnCoinAnimeEnd,this),cc.log("SpawnCoin Anime End"),this.node.active=!1,this.emitGameOverEvent()},enableCageBtn:function(t){for(var e=0;e<this.cageBtns.length;e++)t?!1===this.cages[e].getComponent("Door").isOpen?this.cageBtns[e].interactable=t:this.cageHints[e].active=!1:this.cageBtns[e].interactable=t},showHideCageBtn:function(t){for(var e=0;e<this.cageBtns.length;e++)this.cageHints.visible=t},showDogNum:function(t,e){this.dogNumObj.active=t,this.dogLabel.string="x"+e},showBigDog:function(t){this.bigDog&&(this.bigDog.active=t)},showBtnHints:function(t,e){if(e)this.cageHints[e].active=t;else for(var n=0;n<this.cageHints.length&&(!this.cageHints[n].active||!t);n++)this.cageHints[n].active=t,t&&(this.cageHints[n].getComponentInChildren("cc.Animation").setCurrentTime(0),this.cageHints[n].getComponentInChildren("cc.Animation").play())},playBigDogBark:function(){this.bigDog&&this.bigDog.getComponent("BigDog").playDogBark()},onBigDogBarkAnimeEnd:function(){cc.log("BigDog Bark Anime Eend"),this.gameWaitShowSettle()},showCowNum:function(t,e,n){if(this.cowNumObj.active=t,this.cowLabel.string="x"+e,n&&t){var i=this.cowLabel.node.scaleX,o=this.cowLabel.node.scaleY;this.cowLabel.node.scaleX=2*i,this.cowLabel.node.scaleY=2*o;var s=this.cowLabel.node.getDisplayedColor();this.cowLabel.node.color=new cc.Color(255,0,0);var a=cc.tintTo(.2,s);this.cowLabel.node.runAction(cc.spawn(cc.scaleTo(.2,i,o),a))}},showCages:function(t){for(var e=0;e<this.cages.length;e++)this.cages[e].active=t,this.cages[e].setLocalZOrder(6-e)},showSettlePoint:function(t,e){this.settleView.getComponent("SettleView").updateSettleWithServer([e],[this.settleView.multiples],[this.totalWin]),this.settleView.active=t},showDogMoveInCage:function(t){this.enableCageBtn(!1),cc.log("Move In Cage :::"+t),this.dog.target=this.cages[t],this.dog.startMoveToTarget()},onDogMoveInCageAnimeEnd:function(t){cc.log("DogMoveInCageAnimeEnd"),cc.log("CowNumber:::"+this.tempCowNumber),this.generateAnimal(this.tempCowNumber,this.cowParent),0==this.tempCowNumber&&(this.dogNum>0?this.dog.startMoveOut(null):(this.cowZeroScore.active=!0,this.cowZeroScore.getComponent("cc.Animation").play(),this.dog.startMoveOut(this.bigDog.position)))},onCountDownEnd:function(){this.clickIndex=-1;for(var t=0;t<this.cageBtns.length;t++)if(1==this.cageBtns[t].interactable){this.cageBtns[t].interactable=!1,this.clickIndex=t;break}this.emitRequestSpin()},onClickCagesBtn:function(t){this.clickIndex=this.findClickCageBtn(t.currentTarget),this.clickIndex>=0&&(this.cageBtns[this.clickIndex].interactable=!1,this.emitRequestSpin(),this.cages[this.clickIndex].getComponent("Door").showOpenDoor(),this.cowParent=this.cages[this.clickIndex],this.enableCageBtn(!1),this.showBtnHints(!1)),cc.log("clicked---::"+this.clickIndex)},onServerReplySpin:function(t){this.dogNum=t.chance,cc.log("DogNumber",this.dogNum),this.showDogNum(!1,this.dogNum),this.tempCowNumber=t.count[0],cc.log("CowNumber",this.tempCowNumber),this.totalWin=t.totalChips,cc.log("totalWin",this.totalWin),this.roundWin=t.roundChips,cc.log("roundWin",this.roundWin),this.clickIndex>=0?this.showDogMoveInCage(this.clickIndex):this.dogNum>0?this.gameWaitPickCage():this.playBigDogBark()},generateAnimal:function(t,e){for(var n=0;n<t;n++)cc.log("Generate Animal"),this.cowes.push(this._createAnimal(e,n));cc.log("Animal Length----:"+this.cowes.length)},_createAnimal:function(e,n){t("Cow");var i=null;return(i=cc.instantiate(this.cowPrefab).getComponent("Cow")).node.position=new cc.Vec2(0,0),e.addChild(i.node),e.getComponent("Door").showAnimal(i.node),i.node.on("MoveFinish",this.onAnimalMoveOutEnd,this),i.playRandomMove(),i},onAnimalMoveOutEnd:function(t){this.iMoveOutCount++,cc.log("Move Out:::"+t.currentTarget),t.currentTarget.off("MoveFinish",this.onAnimalMoveOutEnd,this),this.iMoveOutCount==this.cowes.length&&(cc.log("Cow Move Out Finish"),this.dogNum>0?this.dog.startMoveOut(null):this.dog.startMoveOut(this.bigDog.position),this.cowNum=this.cowes.length,cc.log("CowNumber::::::"+this.cowNum),this.showCowNum(!0,this.cowNum,!0),0==this.tempCowNumber?(this.cowZeroScore.active=!0,this.cowZeroScore.getComponent("cc.Animation").play()):(this.cowGetScore.active=!0,this.cowGetScore.getComponent("cc.Animation").play()))},onDogMoveOutEnd:function(t){cc.log("onDogMoveOutEnd"),this.dogNum>0?this.gameWaitPickCage():this.playBigDogBark()},emitRequestSpin:function(){for(var t=this.clickIndex+1,e=0;e<this.requesSpinHandler.length;e++)this.requesSpinHandler[e].emit([t])},emitGameOverEvent:function(){for(var t=0;t<this.gameOverEventHandler.length;t++)this.gameOverEventHandler[t].emit([this.totalWin])},emitGameRoundStartEvent:function(){for(var t=0;t<this.gameRoundStartEventHandler.length;t++)this.gameRoundStartEventHandler[t].emit([])},removeAllCows:function(){for(var t=0;t<this.cowes.length;t++)this.cowes[t].node.removeFromParent()},closeAllDoor:function(){for(var t=0;t<this.cages.length;t++)this.cages[t].getComponent("Door").showCloseDoor()},findClickCageBtn:function(t){for(var e=-1,n=0;n<this.cageBtns.length;n++)if(t.name==this.cageBtns[n].node.name){e=n;break}return e}}),cc._RF.pop()},{"../BonusView":"BonusView","../SettleView":"SettleView",Cow:"Cow",Dog:"Dog",SpawnCoin:"SpawnCoin",StartGame:"StartGame"}],Bonus03Ctrl:[function(t,e,n){"use strict";cc._RF.push(e,"5c258S73AdCeaAMSxwtIZL0","Bonus03Ctrl");var i=t("../BonusController");cc.Class({extends:i,properties:{wormNum:{default:0,visible:!1},mouseNum:{default:0,visible:!1},sparrowNum:{default:0,visible:!1}},gameWaitStart:function(t){this._super(t),this.wormNum=0,this.mouseNum=0,this.sparrowNum=0},emitRequestSpin:function(t){this._super(t)},debugSpin:function(t){switch(t){case 7:this.wormNum++;break;case 6:this.mouseNum++;break;case 5:this.wormNum++;break;case 4:this.sparrowNum++;break;case 3:this.wormNum++;break;case 2:this.mouseNum++;break;case 1:this.wormNum++}return{count:{bug:this.wormNum,mouse:this.mouseNum,sparrow:this.sparrowNum}}}}),cc._RF.pop()},{"../BonusController":"BonusController"}],Bonus03View:[function(t,e,n){"use strict";cc._RF.push(e,"bdeb53L2EZC9LsZtRYgoNst","Bonus03View");var i=t("BombView"),o=t("../BonusView"),s=t("SettleView"),a=t("WinPointView"),c=t("../Animal"),l=t("../CountDown"),h=t("../SpawnCoin");cc.Class({extends:o,properties:{winPointGroup:{default:null,type:a},settleView:{default:null,type:s},settleTime:{default:2,displayName:"\u7d50\u7b97\u6642\u9593(sec)"},multiples:{default:1,displayName:"\u5f69\u91d1\u500d\u6578",tooltip:"BG\u7684\u5f69\u91d1\u500d\u6578\u4f9dSymbol\u6578\u4e0d\u540c"},bombView:{default:null,type:i},startBtn:{default:null,type:cc.Node},introWord:{default:null,type:cc.Node},countDown:{default:null,type:l},mouses:{default:[],type:[c]},sparrows:{default:[],type:[c]},worms:{default:[],type:[c]},spawnCoinPrefab:{default:null,type:cc.Prefab},spawnCoinInstance:{default:null,type:h,visible:!1},farmer:{default:null,type:cc.Node,displayName:"\u8fb2\u592b\u52d5\u756b(\u6703\u5728\u5674\u91d1\u5e63\u6642\u51fa\u73fe)"},mask:{default:null,type:cc.Node,displayName:"\u986f\u793a\u7bc4\u570d"},arrCollisionAnimalTypes:{default:[],type:[cc.Integer],displayName:"\u78b0\u649e\u52d5\u7269\u7d22\u5f15\u9663\u5217[1:\u87f2\u87f2,2:\u8001\u9f20,4:\u9ebb\u96c0]"},notifyCollisionEvent:{default:[],type:[cc.Component.EventHandler]},notifySettleEndEvent:{default:[],type:[cc.Component.EventHandler]},gameOverEventHandler:{default:[],type:[cc.Component.EventHandler]}},onLoad:function(){this.node.active=!1},gameWaitStart:function(t){cc.log("init data",t),this.settleView.arrSettlePoint=t.multiply,this.node.active=!0,this.introWord&&(this.introWord.active=!0),this.bugNum=0,this.mouseNum=0,this.sparrowNum=0,this.countDown.closeCountDown(),this.showHideWinPointGroup(!1),this.settleView.gameWaitStart(),this.bombView&&this.bombView.gameWaitStart(t.bgInfo),this.hideAllMouse(),this.hideAllWorms(),this.hideAllSparrows(),this.startBtn.active=!0,this.randomMoveAnimals(this.mouses,2),this.randomMoveAnimals(this.worms,3),this.farmer.getComponent("ShowHide").hide()},gameStart:function(){this.startBtn.active=!1,this.introWord&&(this.introWord.active=!1),this.countDown.reset(),this.countDown.showCountDown(),this.countDown.startCountDown(),this.winPointGroup.gameStart(),this.worms[5].moveCross(),this.bombView.gameStart()},gameSettle:function(){this.countDown.closeCountDown(),this.hideAllMouse(),this.hideAllSparrows(),this.hideAllWorms(),this.winPointGroup.gameSettle(),this.bombView.gameSettle(),this.settleView.multiples=1,this.settleView.gameSettle([this.bugNum,this.mouseNum,this.sparrowNum]),cc.director.getScheduler().schedule(this.doSettleEnd,this,this.settleTime,0)},doSettleEnd:function(){cc.log("SettleEnd"),cc.director.getScheduler().unschedule(this.doSettleEnd,this,this.settleTime,0),this.bugNum+this.mouseNum+this.sparrowNum>0?this.gameSpawnCoin():(this.node.active=!1,this.emitGameOverEvent())},gameSpawnCoin:function(){cc.log("Eneter SpawnCoin"),this.farmer.getComponent("ShowHide").show(),this.farmer.getComponent("PlayStop").play(),this.node.getComponent("BGAudio").playSpawnCoinSFX(),this.spawnCoinInstance=cc.instantiate(this.spawnCoinPrefab).getComponent("SpawnCoin"),this.spawnCoinInstance.node.parent=this.mask,this.spawnCoinInstance.node.on("SpawnCoinAnimeEnd",this.onSpawnCoinAnimeEnd,this),this.spawnCoinInstance.playAnime()},onSpawnCoinAnimeEnd:function(){this.spawnCoinInstance.node.off("SpawnCoinAnimeEnd",this.onSpawnCoinAnimeEnd,this),cc.log("SpawnCoin Anime End"),this.node.active=!1,this.emitGameOverEvent()},onCountDownEnd:function(t){this.bombView.gameSettle(),this.emitCollisionEvent(-1)},doServerReplySpin:function(t){this.bugNum!=t.count[0]&&0!=t.count[0]&&this.winPointGroup.playWinAnime(0),this.bugNum=t.count[0],this.winPointGroup.updateWinPoint(0,this.bugNum),this.mouseNum!=t.count[1]&&0!=t.count[1]&&this.winPointGroup.playWinAnime(1),this.mouseNum=t.count[1],this.winPointGroup.updateWinPoint(1,this.mouseNum),this.sparrowNum!=t.count[2]&&0!=t.count[2]&&this.winPointGroup.playWinAnime(2),this.sparrowNum=t.count[2],this.winPointGroup.updateWinPoint(2,this.sparrowNum),this.totalWin=t.totalChips,this.roundWin=t.roundChips,cc.log("RoundChip:::",t.roundChips),cc.log("TotalChips::",t.totalChips),0==t.chance&&this.gameSettle()},randomMoveCross:function(){var t=void 0;switch(Math.floor(3*cc.random0To1())){case 0:t=Math.floor(cc.random0To1()*this.mouses.length),this.mouses[t].isShow||this.mouses[t].moveCross();break;case 1:t=Math.floor(cc.random0To1()*this.sparrows.length),this.sparrows[t].isShow||this.sparrows[t].moveCross();break;case 2:t=Math.floor(cc.random0To1()*this.worms.length),this.worms[t].isShow||this.worms[t].moveCross()}},randomMoveAnimals:function(t,e){if(e<=t.length)for(var n=0;n<e;n++)t[n].show(),t[n].randomMoveX()},onCollisionWithAnimal:function(t){cc.log("Collision with animal::::"+t);var e=this.findAnimal(t);cc.log("SendCollision Number::::"+e),this.emitCollisionEvent(e)},emitCollisionEvent:function(t){for(var e=0;e<this.notifyCollisionEvent.length;e++)this.notifyCollisionEvent[e].emit([t])},emitGameOverEvent:function(){for(var t=0;t<this.gameOverEventHandler.length;t++)this.gameOverEventHandler[t].emit([this.totalWin])},emitSettleEndEvent:function(){for(var t=0;t<this.notifySettleEndEvent.length;t++)this.notifySettleEndEvent[t].emit([])},findAnimal:function(t){for(var e=0,n=0;n<this.arrCollisionAnimalTypes.length;n++)t.indexOf(this.arrCollisionAnimalTypes[n])>=0&&(e+=this.arrCollisionAnimalTypes[n]);return e},showHideWinPointGroup:function(t){this.winPointGroup&&(t?this.winPointGroup.show():this.winPointGroup.hide())},hideAllMouse:function(){for(var t=0;t<this.mouses.length;t++)this.mouses[t].hide()},hideAllSparrows:function(){for(var t=0;t<this.sparrows.length;t++)this.sparrows[t].hide()},hideAllWorms:function(){for(var t=0;t<this.worms.length;t++)this.worms[t].hide()}}),cc._RF.pop()},{"../Animal":"Animal","../BonusView":"BonusView","../CountDown":"CountDown","../SpawnCoin":"SpawnCoin",BombView:"BombView",SettleView:"SettleView",WinPointView:"WinPointView"}],Bonus04View:[function(t,e,n){"use strict";cc._RF.push(e,"6db42oIVg5PnLD/z8ptqWDS","Bonus04View");var i=t("../SettleView"),o=t("../BonusView"),s=t("../SpawnCoin"),a=t("EnemyView"),c=t("Player");cc.Class({extends:o,properties:{startBtn:{default:null,type:cc.Node},introObject:{default:null,type:cc.Node},changeWeaponBtns:{default:[],type:[cc.Button],displayName:"\u5207\u63db\u6b66\u5668\u6309\u9215"},player:{default:null,type:cc.Node},enemy:{default:null,type:cc.Node},settleView:{default:null,type:i},settleTime:{default:2,displayName:"\u7d50\u7b97\u6642\u9593(sec)"},multiples:{default:1,displayName:"\u5f69\u91d1\u500d\u6578",tooltip:"BG\u7684\u5f69\u91d1\u500d\u6578\u4f9dSymbol\u6578\u4e0d\u540c"},landlord:{default:null,type:cc.Node},spawnCoinPrefab:{default:null,type:cc.Prefab},spawnCoinInstance:{default:null,type:s,visible:!1},mask:{default:null,type:cc.Node,displayName:"\u986f\u793a\u7bc4\u570d"},arrowButtons:{default:[],type:[cc.Button],displayName:"\u7bad\u982d\u6309\u9215"},notifySettleEndEvent:{default:[],type:[cc.Component.EventHandler]},gameStartEvent:{default:[],type:[cc.Component.EventHandler]},requesSpinHandler:{default:[],type:[cc.Component.EventHandler]}},onLoad:function(){},gameWaitStart:function(t){cc.log("init data",t),this.player&&(this.player.getComponent(c).setInitBlood(t.bgInfo.landlordHP),this.player.getComponent(c).setIngosAttackInterval(t.bgInfo.landlordAtkCD)),this.enemy&&(this.enemy.getComponent(a).setFarmerBlood(t.bgInfo.farmerHP),this.enemy.getComponent(a).setIsRandomThrow(!0),this.enemy.getComponent(a).setThrowRate(t.bgInfo.farmerHighAtkRate),this.enemy.getComponent(a).setThrowWeaponInterval(t.bgInfo.farmerLowAtkCD,t.bgInfo.farmerHighAtkCD)),this.settleView.arrSettlePoint=t.multiply,this.node.active=!0,this.enableArrowButton(!1),this.enableCollision(!1),this.settleView.gameWaitStart(),this.player.active=!1,this.startBtn.active=!0,this.landlord.active=!1,this.enableChangeWeaponBtn(!1),this.introObject&&(this.introObject.active=!0)},gameStart:function(){this.introObject&&(this.introObject.active=!1),this.startBtn.active=!1,this.enableArrowButton(!0),this.enableCollision(!0),this.player.active=!0,this.enemy.active=!0,this.emitGameStartEvent(),this.enableChangeWeaponBtn(!1),this.player.getComponent("StepMove").setDefault()},gameOver:function(){this.enableArrowButton(!1),this.enableChangeWeaponBtn(!1),this.enableCollision(!1),this.player.active=!1,this.node.active=!1,this.emitSettleEndEvent()},gameSettle:function(){this.enemy.getComponent("EnemyView").onGameOver(),this.enemy.active=!1,this.enableArrowButton(!1),this.enableChangeWeaponBtn(!1),this.player.getComponent("Throw").hideWeapon(),this.player.getComponent("Throw").onGameSettle(),this.player.getComponent("Player").gameOver(),this.enableCollision(!1),this.player.active=!1;var t=this.player.getChildByName("bloodBar").getComponent("Bar").currentValue;this.settleView.updateSettleWithServer([t],this.settleView.arrSettlePoint,[this.totalWin]),cc.director.getScheduler().schedule(this.doSettleEnd,this,this.settleTime,0)},doSettleEnd:function(){cc.log("SettleEnd"),cc.director.getScheduler().unschedule(this.doSettleEnd,this,this.settleTime,0),this.gameSpawnCoin()},gameSpawnCoin:function(){cc.log("Eneter SpawnCoin");var t=this.player.getChildByName("bloodBar").getComponent("Bar").currentValue;if(this.player.getComponent("StepMove").disableMove(),0==t)return this.emitSettleEndEvent(),void(this.node.active=!1);this.landlord.getComponent("ShowHide").show(),this.landlord.getComponent("PlayStop").play(),this.node.getComponent("BGAudio").playSpawnCoinSFX(),this.spawnCoinInstance=cc.instantiate(this.spawnCoinPrefab).getComponent("SpawnCoin"),this.spawnCoinInstance.node.parent=this.mask,this.spawnCoinInstance.node.on("SpawnCoinAnimeEnd",this.onSpawnCoinAnimeEnd,this),this.spawnCoinInstance.playAnime()},onSpawnCoinAnimeEnd:function(){this.spawnCoinInstance.node.off("SpawnCoinAnimeEnd",this.onSpawnCoinAnimeEnd,this),cc.log("SpawnCoin Anime End"),this.emitSettleEndEvent(),this.node.active=!1},onServerReplySpin:function(t){var e=t.count.laborA,n=t.count.laborB,i=t.count.laborC,o=t.count.laborD,s=t.count.laborE,a=t.count.management,c=[e,n,i,o,s];cc.log("enemyBloods",c),cc.log("landlordBlood",a),this.enemy.getComponent("EnemyView").updateBlood([e,n,i,o,s]),this.player.getComponent("Actor").updateBloodBar(a),this.roundWin=t.roundChips,this.totalWin=t.totalChips,0==t.chance&&this.gameSettle()},enableChangeWeaponBtn:function(t){},enableArrowButton:function(t){for(var e=0;e<this.arrowButtons.length;e++)this.arrowButtons[e].node.active=t,this.arrowButtons[e].interactable=t},enableCollision:function(t){cc.director.getCollisionManager().enabled=t},emitGameStartEvent:function(){for(var t=0;t<this.gameStartEvent.length;t++)this.gameStartEvent[t].emit([])},emitRequestSpin:function(t){this.clickIndex;for(var e=0;e<this.requesSpinHandler.length;e++)this.requesSpinHandler[e].emit([t])},emitSettleEndEvent:function(){for(var t=0;t<this.notifySettleEndEvent.length;t++)this.notifySettleEndEvent[t].emit([this.totalWin])}}),cc._RF.pop()},{"../BonusView":"BonusView","../SettleView":"SettleView","../SpawnCoin":"SpawnCoin",EnemyView:"EnemyView",Player:"Player"}],BonusController:[function(t,e,n){"use strict";cc._RF.push(e,"a7a61PgOCtA8588fHN1XvI6","BonusController"),cc.Class({extends:cc.Component,properties:{playBGMEventHandler:{default:null,type:cc.Component.EventHandler,displaName:"\u64ad\u653e\u80cc\u666f\u97f3\u6a02"},gameWaitStartEventHandler:{default:[],type:[cc.Component.EventHandler]},gameStartEventHandler:{default:[],type:[cc.Component.EventHandler]},gameWaitRoundStartEventHandler:{default:[],type:[cc.Component.EventHandler],displaName:"\u7b49\u5f85\u56de\u5408\u958b\u59cb"},gameRoundStartEventHandler:{default:[],type:[cc.Component.EventHandler],displaName:"\u56de\u5408\u958b\u59cb"},gameRoundEndEventHandler:{default:[],type:[cc.Component.EventHandler],displaName:"\u56de\u5408\u7d50\u675f"},gameOverEventHandler:{default:[],type:[cc.Component.EventHandler]},gameSettleEventHandler:{default:[],type:[cc.Component.EventHandler]},requesSpinHandler:{default:[],type:[cc.Component.EventHandler]},replySpinHandler:{default:[],type:[cc.Component.EventHandler]}},onLoad:function(){},start:function(){},gameWaitStart:function(t){this.emitGameWaitStartEvent(t)},gameStart:function(){this.emitGameStartEvent()},gameWaitRoundStart:function(){this.emitGameWaitRoundStartEvent()},gameRoundStart:function(){this.emitGameWRoundStartEvent()},gameRoundEnd:function(){this.emitGameWRoundEndEvent()},gameSettle:function(){this.emitGameSettleEvent()},gameOver:function(t){this.emitGameOverEvent(t)},onReplySpin:function(t){cc.log("ServerReply:::",t);for(var e=0;e<this.replySpinHandler.length;e++)this.replySpinHandler[e].emit([t])},emitGameWaitStartEvent:function(t){for(var e=0;e<this.gameWaitStartEventHandler.length;e++)this.gameWaitStartEventHandler[e].emit([t])},emitGameStartEvent:function(){for(var t=0;t<this.gameStartEventHandler.length;t++)this.gameStartEventHandler[t].emit([])},emitGameWaitRoundStartEvent:function(){for(var t=0;t<this.gameWaitRoundStartEventHandler.length;t++)this.gameWaitRoundStartEventHandler[t].emit([])},emitGameWRoundStartEvent:function(){for(var t=0;t<this.gameRoundStartEventHandler.length;t++)this.gameRoundStartEventHandler[t].emit([])},emitGameWRoundEndEvent:function(){for(var t=0;t<this.gameRoundEndEventHandler.length;t++)this.gameRoundEndEventHandler[t].emit([])},emitGameSettleEvent:function(){for(var t=0;t<this.gameSettleEventHandler.length;t++)this.gameSettleEventHandler[t].emit([])},emitGameOverEvent:function(t){for(var e=0;e<this.gameOverEventHandler.length;e++)this.gameOverEventHandler[e].emit([t])},emitRequestSpin:function(t){cc.log("Request Spin:::"+t);for(var e=0;e<this.requesSpinHandler.length;e++)this.requesSpinHandler[e].emit([t])},debugSpin:function(t){return null}}),cc._RF.pop()},{}],BonusMouse:[function(t,e,n){"use strict";cc._RF.push(e,"65011yC+jNFIpDFMHciWX8Y","BonusMouse");var i=t("../Animal");cc.Class({extends:i,properties:{},randomMove:function(){this.randomMoveX()}}),cc._RF.pop()},{"../Animal":"Animal"}],BonusView:[function(t,e,n){"use strict";cc._RF.push(e,"aa8f8XxN/JER7GElrWAOtOo","BonusView"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},gameWaitStart:function(){},gameStart:function(){},gameSettle:function(){},gameSpawnCoin:function(){}}),cc._RF.pop()},{}],Controller:[function(t,e,n){"use strict";cc._RF.push(e,"b0c4cCzdCxK0o3jUJGRkJiz","Controller");var i="color: white; background: #0EB6E4; font-size: 120%",o="color: white; background: #70E08C;",s=t("View"),a=t("Model"),c=(t("Socket"),t("Actions")),l=cc.Class({extends:cc.Component,editor:{disallowMultiple:l},properties:{model:{type:a,readonly:!0,get:function(){return this.getComponent(a)},tooltip:"Model \u7d44\u4ef6\u53c3\u8003"}},onLoad:function(){cc.director.once(cc.Director.EVENT_BEFORE_SCENE_LOADING,this.onBeforeSceneLoading,this),cc.director.once(cc.Director.EVENT_AFTER_SCENE_LAUNCH,this.onAfterSceneLaunch,this),cc.log("%c"+cc.js.getClassName(this),i,"1.onLoad")},onEnable:function(){cc.log("%c"+cc.js.getClassName(this),i,"2.onEnable"),this.node.on(c.VIEW_BUTTON_CLICKED,this._onViewButtonAction,this),this.node.on(c.ACTION_FROM_VIEW,this._onViewActon,this),this._registerController(!0)},_registerController:function(t){cc.director.getScene().children.forEach(function(e){e.getComponentsInChildren(l).forEach(function(e){e!=this&&(t?e.node.on(c.ACTION_BETWEEN_CTRL,this._onCtrlAction,this,!0):e.node.off(c.ACTION_BETWEEN_CTRL,this._onCtrlAction,this,!0))},this)},this)},onAfterSceneLaunch:function(){cc.log("%c"+cc.js.getClassName(this),i,"3.onAfterSceneLaunch")},start:function(){cc.log("%c"+cc.js.getClassName(this),i,"4.start")},onBeforeSceneLoading:function(){cc.log("%c"+cc.js.getClassName(this),i,"5.onBeforeSceneLoading")},onDisable:function(){cc.log("%c"+cc.js.getClassName(this),i,"6.onDisable"),this.node.off(c.VIEW_BUTTON_CLICKED,this._onViewButtonAction,this),this.node.off(c.ACTION_FROM_VIEW,this._onViewActon,this),this._registerController(!1),TweenLite.killTweensOf(this)},onDestroy:function(){cc.log("%c"+cc.js.getClassName(this),i,"7.onDestroy")},_onViewButtonAction:function(t,e){var n=t;e?(cc.log("%c"+cc.js.getClassName(this),o,"\u63a5\u53d7\u5230\u4f86\u81ea 0 <"+e.name+"> \u7684 "+n.type+" \u4e8b\u4ef6\uff0c\u52d5\u4f5c\u662f "+n.name),this.onButtonClick(n.name,e)):(cc.log("%c"+cc.js.getClassName(this),o,"\u63a5\u53d7\u5230\u4f86\u81ea 1 <"+t.target.name+"> \u7684 "+t.type+" \u4e8b\u4ef6\uff0c\u52d5\u4f5c\u662f "+t.detail.name),this.onButtonClick(t.detail.name,t.detail.target))},onButtonClick:function(t,e){},_onViewActon:function(t,e){var n=t;e?(cc.log("%c"+cc.js.getClassName(this),o,"\u63a5\u53d7\u5230\u4f86\u81ea 0 <"+e.name+"> \u7684 "+n.type+" \u4e8b\u4ef6\uff0c\u52d5\u4f5c\u662f "+n.name),this.onViewAction(n.name,n.data)):(cc.log("%c"+cc.js.getClassName(this),o,"\u63a5\u53d7\u5230\u4f86\u81ea 1 <"+n.target.name+"> \u7684 "+n.type+" \u4e8b\u4ef6\uff0c\u52d5\u4f5c\u662f "+n.detail.name),this.onViewAction(n.detail.name,n.detail.data))},onViewAction:function(t,e){},_onCtrlAction:function(t,e){var n=t;e?(cc.log("%c"+cc.js.getClassName(this),o,"\u63a5\u53d7\u5230\u4f86\u81ea <"+e.name+"> \u7684 "+n.type+" \u4e8b\u4ef6",t,"\uff0c\u52d5\u4f5c\u662f "+n.name),this.onCtrlAction(n.name,n.data)):(cc.log("%c"+cc.js.getClassName(this),o,"\u63a5\u53d7\u5230\u4f86\u81ea <"+n.target.name+"> \u7684 "+n.type+" \u4e8b\u4ef6\uff0c\u52d5\u4f5c\u662f "+n.detail.name),this.onCtrlAction(n.detail.name,n.detail.data))},onCtrlAction:function(t,e){},ctrlAction:function(t,e){cc.log("%c"+cc.js.getClassName(this),"color: white; background: #1D8348;","\u9001\u51fa <"+t+"> \u7684 ctrlAction \u4e8b\u4ef6\uff0c\u8cc7\u6599\u662f",e);var n={name:t,data:e,type:t};this.getComponentsInChildren(s).forEach(function(t){t.node.emit(c.ACTION_FROM_CTRL,n,t.node)},this),this.node.emit(c.ACTION_BETWEEN_CTRL,n,this.node)}});cc.log("CLASS Controller Loaded"),cc._RF.pop()},{Actions:"Actions",Model:"Model",Socket:"Socket",View:"View"}],CountDown:[function(t,e,n){"use strict";cc._RF.push(e,"1b178L4IUlKYoKtJ40zAHzG","CountDown"),cc.Class({extends:cc.Component,properties:{timeLabel:{default:null,type:cc.Label},initSec:10,currSec:{default:10,visible:!1},countUpdateHandler:{default:[],type:[cc.Component.EventHandler]},countDownEndHandler:{default:[],type:[cc.Component.EventHandler]}},onLoad:function(){this.currSec=this.initSec,this.updateCountDown(),this.closeCountDown(),this.bIsStartCount=!1},reset:function(){this.stop(),this.currSec=this.initSec,this.updateCountDown()},startCountDown:function(){this.bIsStartCount=!0,cc.director.getScheduler().schedule(this.doCountDown,this,1,0)},doCountDown:function(){this.currSec--,this.updateCountDown(),this.emitCountUpdateEvent(),this.currSec<=0&&(this.stop(),this.emitCountEndEvent())},showCountDown:function(){this.node.active=!0},closeCountDown:function(){this.node.active=!1,this.stop()},updateCountDown:function(){this.timeLabel&&(this.timeLabel.string=this.currSec.toString())},emitCountEndEvent:function(){for(var t=0;t<this.countDownEndHandler.length;t++)this.countDownEndHandler[t].emit([])},emitCountUpdateEvent:function(){for(var t=0;t<this.countUpdateHandler.length;t++)this.countUpdateHandler[t].emit([])},stop:function(){this.bIsStartCount&&(cc.director.getScheduler().unschedule(this.doCountDown,this),this.bIsStartCount=!1)}}),cc._RF.pop()},{}],Cow:[function(t,e,n){"use strict";cc._RF.push(e,"66037YQ7fxBFKjLBjbVOdGY","Cow");cc.Class({extends:cc.Component,properties:{minStopTime:1,maxStopTime:2,walkTime:3,maxWalkDistanceX:360,maxWalkDistanceY:240,followTarget:{default:null,type:cc.Node},bIsFollowTarget:{visible:!1,default:!1},moveSpeed:1.2,trackDistance:100},onLoad:function(){this.animation=this.node.getComponent("cc.Animation"),this.initScaleX=this.node.scaleX,this.initScaleY=this.node.scaleY,this.initPos=this.node.getPosition(),this.iStopCount=0,this.sumTime=0},debug:function(t){this.playRandomMove()},playFollowTarget:function(t){null!==t&&(this.followTarget=t),this.playCowWalk(),this.bIsFollowTarget=!0},stopFollowTarget:function(){this.bIsFollowTarget=!1,this.playCowStop()},playRandomMove:function(){var t=cc.random0To1()*this.maxWalkDistanceX+this.maxWalkDistanceX/2,e=-1*this.maxWalkDistanceY/2+cc.random0To1()*this.maxWalkDistanceY,n=cc.moveTo(this.walkTime,t,e);this.moveEndFinish=cc.callFunc(this.playCowStop,this),n=cc.sequence(n,this.moveEndFinish);var i=cc.random0To1()*(this.maxStopTime-this.minStopTime)+this.minStopTime;this.stopEndFinish=cc.callFunc(this.playRandomMove,this);var o=cc.sequence(cc.delayTime(i),this.stopEndFinish),s=cc.sequence(n,o);t<this.node.x?this.node.scaleX=-1*this.initScaleX:this.node.scaleX=this.initScaleX,this.playCowWalk(),this.node.runAction(s)},playCowWalk:function(){this.playAnimation("BG2_COW_WALK")},playCowStop:function(){this.node.emit("MoveFinish"),this.playAnimation("BG2_COW_STOP")},onCowStopAnimeEnd:function(){this.iStopCount=0},playAnimation:function(t){this.animation.play(t)},update:function(t){null!==this.followTarget&&this.bIsFollowTarget&&(this.followTarget.x<0?this.node.position=cc.pLerp(this.node.position,cc.pAdd(this.followTarget.position,new cc.Vec2(this.trackDistance,0)),t):this.node.position=cc.pLerp(this.node.position,cc.pSub(this.followTarget.position,new cc.Vec2(this.trackDistance,0)),t),this.node.x<this.followTarget.x?this.node.scaleX=this.initScaleX:this.node.scaleX=-1*this.initScaleX,cc.pDistance(this.node.position,this.followTarget.position)<=this.trackDistance+50&&(cc.log("Track Finish"),this.stopFollowTarget()))}}),cc._RF.pop()},{}],DisconnecView:[function(t,e,n){"use strict";cc._RF.push(e,"d5f36UB/HxPgYKKEDyhvhvM","DisconnecView");var i=t("View"),o=t("Socket");cc.Class({extends:i,onLoad:function(){this._super(),this.block=!0,this.visible=!1,o.on("disconnect",this._onDisconnect,this)},start:function(){this._super()},_onDisconnect:function(){cc.log(this,"onDisconnect"),this.visible=!0}}),cc._RF.pop()},{Socket:"Socket",View:"View"}],Dog:[function(t,e,n){"use strict";cc._RF.push(e,"fc02bxsuzNEyrgeOKqW8esI","Dog");var i="BG2_DOG_RUN";cc.Class({extends:cc.Component,properties:{target:{default:null,type:cc.Node},dogBarkEventHandler:{default:[],displayName:"\u72d7\u53eb\u4e8b\u4ef6",type:[cc.Component.EventHandler]},dogBarkAnimeEndEventHandler:{default:[],displayName:"\u72d7\u53eb\u52d5\u756b\u7d50\u675f\u4e8b\u4ef6",type:[cc.Component.EventHandler]},dogMoveInAnimeEndEventHandler:{default:[],displayName:"\u72d7\u72d7\u79fb\u9032\u7c60\u5b50\u52d5\u756b\u7d50\u675f\u4e8b\u4ef6",type:[cc.Component.EventHandler]},moveToTargetDuration:{default:1,type:cc.Float,visible:!0},moveSpeed:{default:10,type:cc.Float,visible:!1},moveOutEventHandler:{default:[],type:[cc.Component.EventHandler]}},onLoad:function(){this.initScaleX=this.node.scaleX,this.initScaleY=this.node.scaleY,this.initPos=this.node.getPosition(),this.animation=this.node.getComponent("cc.Animation"),this.iBarkCount=0},startMoveToTarget:function(){cc.log("StartMove"),this.node.stopAllActions(),this.node.setLocalZOrder(8),this.node.scaleX=this.initScaleX,this.node.scaleY=this.initScaleY,this.animation.stop(),this.animation.play(i);var t=this.target.getPosition();t.x=t.x+50;var e=cc.moveTo(this.moveToTargetDuration,t),n=cc.sequence(cc.delayTime(this.moveToTargetDuration-.2),cc.scaleTo(.2,.8*this.initScaleX,.8*this.initScaleY));this.finished=cc.callFunc(this.onMoveInActionEnd,this),this.node.runAction(cc.sequence(cc.spawn(n,e),this.finished))},startMoveOut:function(t){cc.log("Move Out"),t=t?new cc.Vec2(0,-80):this.initPos,this.node.stopAllActions(),this.animation.stop(),this.playDogRun();var e=cc.moveTo(this.moveToTargetDuration,t);this.node.scaleX=-1*this.node.scaleX,this.finished=cc.callFunc(this.onMoveOutAnimeEnd,this),this.node.runAction(cc.sequence(cc.spawn(cc.scaleTo(0,-1*this.initScaleX,this.initScaleY),e),this.finished))},waitMoveOutOfDoor:function(t){},showDog:function(t){t&&(this.node.setPosition(this.initPos),this.node.scaleX=this.initScaleX,this.node.scaleY=this.initScaleY),this.node.active=t},playDogRun:function(){this.playAnimation(i)},playDogBark:function(){this.iBarkCount=0,this.playAnimation("BG2_DOG_BARK")},onDogBark:function(){cc.log("Dog Bark"),this.emitDogBarkEvent()},onDogBarkAnimeEnd:function(){cc.log("Bark Anime End"),this.iBarkCount++,this.iBarkCount>=3&&(this.animation.stop(),this.node.emit("Bark_Anime_End"),this.emitDogBarkAnimeEndEvent())},onMoveInActionEnd:function(){cc.log("Dog Move in Cage Anime End"),this.iBarkCount=0,this.playAnimation("BG2_DOG_MOVE_IN")},onDogMoveInAnimeEnd:function(){this.iBarkCount++,this.iBarkCount>=3&&(this.animation.stop(),this.emitDogMoveInAnimeEndEvent())},onMoveOutAnimeEnd:function(){cc.log("Dog Move Out Cage Anime End"),this.animation.stop(),this.showDog(!1),this.node.emit("MoveOutFinish"),this.emitMoveOutEvent()},emitMoveOutEvent:function(){for(var t=0;t<this.moveOutEventHandler.length;t++)this.moveOutEventHandler[t].emit([])},emitDogBarkEvent:function(){for(var t=0;t<this.dogBarkEventHandler.length;t++)this.dogBarkEventHandler[t].emit([])},emitDogBarkAnimeEndEvent:function(){for(var t=0;t<this.dogBarkAnimeEndEventHandler.length;t++)this.dogBarkAnimeEndEventHandler[t].emit([])},emitDogMoveInAnimeEndEvent:function(){for(var t=0;t<this.dogMoveInAnimeEndEventHandler.length;t++)this.dogMoveInAnimeEndEventHandler[t].emit([])},playAnimation:function(t){this.animation.play(t)}});cc._RF.pop()},{}],Door:[function(t,e,n){"use strict";cc._RF.push(e,"803c38z2MRBDqP1laYmN1N4","Door"),cc.Class({extends:cc.Component,properties:{open:{default:null,type:cc.Node},close:{default:null,type:cc.Node}},onLoad:function(){this.isOpen=!1,this.showCloseDoor()},showOpenDoor:function(){this.isOpen=!0,this.open.active=!0,this.close.active=!1},showAnimal:function(t){this.close.setLocalZOrder(0),t.setLocalZOrder(1),this.open.setLocalZOrder(2)},showCloseDoor:function(){this.isOpen=!1,this.open.active=!1,this.close.active=!0}}),cc._RF.pop()},{}],Eagle:[function(t,e,n){"use strict";cc._RF.push(e,"20663WqnX1LeJU/hMK1BAFy","Eagle");cc.Class({extends:cc.Component,properties:{target:{default:null,type:cc.Node},initScaleX:{default:0,type:cc.Float,visible:!1},moveToTargetDuration:{default:1,type:cc.Float,visible:!0},moveSpeed:{default:10,type:cc.Float,visible:!1},flyingClipName:{default:"eaglefly"},divingClip:{default:"eagleDive"},grabClip:{default:"eaglegrab"},hoverTargets:{default:[],type:[cc.Node]},hoverTime:2,takeCageEventHandler:{default:null,type:cc.Component.EventHandler,displayName:"\u63d0\u53d6\u9f20\u7c60\u4e8b\u4ef6"},updateMouseNumHandler:{default:[],type:[cc.Component.EventHandler]},catchMouseAnimeEndHandler:{default:[],type:[cc.Component.EventHandler]}},onLoad:function(){this.initPosition=this.node.getPosition(),this.initScaleX=this.node.scaleX,this.animation=this.node.getComponent("cc.Animation"),this.targetPositon=new cc.Vec2(0,0),this.targetParent=null,this.targetScaleX=0,this.targetScaleY=0},testDebug:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.startMoveToTarget,this)},startMoveToTarget:function(){if(null!==this.target.parent){cc.log("StartCatch"),this.targetParent=this.target.parent,this.targetPositon=this.target.getPosition(),this.targetScaleX=this.target.scaleX,this.targetScaleY=this.target.scaleY,this.node.stopAllActions(),this.node.scaleX=this.initScaleX,this.animation.stop(),this.animation.play(this.divingClip);cc.p(cc.random0To1()*(this.node.parent.width-this.node.width)/2,.5*this.node.y-this.target.y+this.target.y);var t,e,n=void 0;t=this.target.getBoundingBoxToWorld().width,e=this.target.getBoundingBoxToWorld().height,n=(this.target.x,cc.p(this.target.x,this.target.y-10+e/2+this.node.getBoundingBoxToWorld().height/2));var i=cc.moveTo(this.moveToTargetDuration,n).easing(cc.easeOut(.4*this.moveToTargetDuration)),o=void 0;o=this.target.x+t<this.node.x?cc.flipX(!0):cc.flipX(!1),this.finished=cc.callFunc(this.startCatchAciton,this),this.node.runAction(cc.sequence(cc.spawn(o,i),this.finished))}},startCatchAciton:function(){cc.log("Start Catch Action"),this.animation.play(this.grabClip);var t=cc.scaleTo(.1,this.initScaleX,this.node.scaleY),e=cc.moveTo(this.moveToTargetDuration,cc.p(0,this.node.height));this.target.scaleX=Math.sign(this.node.scaleX)*this.target.scaleX,this.takeCageEventHandler.emit([]);var n=this.node.height;this.target.parent=this.node,this.node.scaleX<0&&(this.target.scaleX=-1*this.target.scaleX),this.target.x=0,this.target.y=0-n/2-this.target.getBoundingBoxToWorld().height/2+10,this.finished=cc.callFunc(this.startFlyOutAction,this),this.node.runAction(cc.sequence(t,e,this.finished))},startFlyOutAction:function(){cc.log("Start Fly Out Action"),this.emitUpdateMouseNumEvent();var t=new cc.Vec2(this.node.parent.width/2+this.node.width/2,this.node.parent.height/2+this.node.height),e=cc.bezierTo(this.moveToTargetDuration,[cc.p(this.node.x,this.node.y),cc.p(cc.director.getWinSize().width/2,cc.director.getWinSize().height/2),t]);this.finished=cc.callFunc(this.startFlyBackAction,this),this.node.runAction(cc.sequence(e,this.finished)),this.animation.play(this.flyingClipName)},startFlyBackAction:function(){this.animation.play(this.flyingClip),cc.log("Start Fly Back Action"),this.target.removeFromParent(!1),this.target.active=!1,this.target.scaleX=this.targetScaleX,this.target.scaleY=this.targetScaleY,this.target.x=this.targetPositon.x,this.target.y=this.targetPositon.y,this.target.parent=this.targetParent,cc.log("Start Fly Back Action----1",this.target);var t=cc.moveTo(1,-cc.director.getWinSize().width/2-this.node.width/2,cc.director.getWinSize().height/2),e=cc.scaleTo(.1,this.initScaleX,this.node.scaleY),n=cc.moveTo(.5,this.initPosition.x,this.initPosition.y);this.finished=cc.callFunc(this.moveAnimeEnd,this);var i=cc.sequence(t,e,n,this.finished);this.node.runAction(i)},moveAnimeEnd:function(){cc.log("Move Anime End"),this.emitCathMouseAnimeEnd(),this.node.emit("moveFinish")},emitUpdateMouseNumEvent:function(){for(var t=0;t<this.updateMouseNumHandler.length;t++)this.updateMouseNumHandler[t].emit([])},emitCathMouseAnimeEnd:function(){for(var t=0;t<this.catchMouseAnimeEndHandler.length;t++)this.catchMouseAnimeEndHandler[t].emit([])},showEagle:function(t){this.node.active=t},startRandomMove:function(){var t=100*cc.random0To1();t=t>50?1:-1;var e=new cc.Vec2(50*cc.random0To1()*t,25*cc.random0To1()*t),n=[cc.pAdd(this.node.getPosition(),e),cc.pAdd(this.hoverTargets[0].getPosition(),e),cc.pAdd(this.hoverTargets[1].getPosition(),e)],i=cc.bezierTo(this.hoverTime,n),o=cc.scaleTo(0,-1*this.initScaleX,this.node.scaleY),s=[n[2],cc.pAdd(this.hoverTargets[2].getPosition(),e),cc.pAdd(this.node.getPosition(),e)],a=cc.bezierTo(this.hoverTime,s),c=cc.scaleTo(0,this.initScaleX,this.node.scaleY);this.finished=cc.callFunc(this.startRandomMove,this);var l=cc.sequence(i,o,a,c,this.finished);this.node.runAction(l),this.animation.play(this.flyingClipName)},stopRandomMove:function(){this.node.stopAllActions(),this.node.setPosition(this.initPosition),this.animation.stop()}});cc._RF.pop()},{}],EnemyView:[function(t,e,n){"use strict";cc._RF.push(e,"d2f364o8sdIbq+DZ55RpLHa","EnemyView");var i=t("Enemy"),o=t("Bar"),s=t("Throw");cc.Class({extends:cc.Component,properties:{enemyInstances:{default:[],type:[i],displayName:"\u6575\u4eba\u5be6\u9ad4\u9663\u5217"},enemyContainers:{default:[],type:[cc.Node],displayName:"\u6575\u4eba\u5bb9\u5668\u9663\u5217"},gameWaitStartEvent:{default:[],type:[cc.Component.EventHandler]},startAttackEvent:{default:[],type:[cc.Component.EventHandler]},enemyNumber:{default:5,displayName:"\u6575\u4eba\u6578\u91cf"},deadEnemyNumber:{default:0,visible:!1},enemyAllDeadEvent:{default:[],type:[cc.Component.EventHandler],displayName:"\u6575\u4eba\u5168\u6b7b\u4ea1\u4e8b\u4ef6"}},onLoad:function(){},setThrowWeaponInterval:function(t,e){if(e>=t&&e>=0&&t>=0)for(var n=0;n<this.enemyInstances.length;n++)this.enemyInstances[n].minThrowWeaponInterval=t,this.enemyInstances[n].maxhrowWeaponInterval=e},setFarmerBlood:function(t){for(var e=0;e<this.enemyInstances.length;e++)this.enemyInstances[e].setInitBlood(t)},setIsRandomThrow:function(t){for(var e=0;e<this.enemyInstances.length;e++)this.enemyInstances[e].node.getComponent(s).isRandomThrow=!0},setThrowRate:function(t){for(var e=0;e<this.enemyInstances.length;e++)this.enemyInstances[e].node.getComponent(s).setThrowRate(t)},onGameWaitStart:function(){this.hideAllEnemys(),this.resetAllEnemyBloodBar(),this.emitGameWaitStartEvent()},onGameStart:function(){this.deadEnemyNumber=0,this.emitStartAttackEvent(),this.arrEnemyIndex=[],this.arrEnemyIndex=this.getRandomArray(0,this.enemyInstances.length-1,5),cc.log(this.arrEnemyIndex);for(var t=0;t<this.arrEnemyIndex.length;t++)this.enemyInstances[this.arrEnemyIndex[t]].node.position=this.enemyContainers[t].position,this.enemyInstances[this.arrEnemyIndex[t]].node.active=!0,this.enemyInstances[this.arrEnemyIndex[t]].actorIndex=Math.pow(2,t),cc.log("EnemyIndex",t,this.enemyInstances[this.arrEnemyIndex[t]].actorIndex),this.enemyInstances[this.arrEnemyIndex[t]].gameStart()},onGameOver:function(){this.hideAllEnemyWeapons(),this.cancelAllEnemyActions()},cancelAllEnemyActions:function(){for(var t=0;t<this.enemyInstances.length;t++)this.enemyInstances[t].gameOver()},updateBlood:function(t){for(var e=0;e<this.arrEnemyIndex.length;e++)this.enemyInstances[this.arrEnemyIndex[e]].updateBloodBar(t[e])},emitGameWaitStartEvent:function(){for(var t=0;t<this.gameWaitStartEvent.length;t++)this.gameWaitStartEvent[t].emit([])},emitStartAttackEvent:function(){for(var t=0;t<this.startAttackEvent.length;t++)this.startAttackEvent[t].emit([])},onEnemyDead:function(){},emitEnemyAllDeadEvent:function(){for(var t=0;t<this.enemyAllDeadEvent.length;t++)this.enemyAllDeadEvent[t].emit([])},hideAllEnemys:function(){for(var t=0;t<this.enemyInstances.length;t++)this.enemyInstances[t].node.active=!1},hideAllEnemyWeapons:function(){for(var t=0;t<this.enemyInstances.length;t++)this.enemyInstances[t].getComponent(s).hideWeapon(),this.enemyInstances[t].getComponent(s).onGameSettle(),this.enemyInstances[t].node.active=!1},resetAllEnemyBloodBar:function(){for(var t=0;t<this.enemyInstances.length;t++)this.enemyInstances[t].getComponentInChildren(o).reset()},getRandom:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},getRandomArray:function(t,e,n){for(var i=[n],o=!1,s=0;s<n;s++){var a=0;do{o=!1,a=this.getRandom(t,e),-1!=i.indexOf(a)&&(o=!0)}while(o);i[s]=a}return i}}),cc._RF.pop()},{Bar:"Bar",Enemy:"Enemy",Throw:"Throw"}],Enemy:[function(t,e,n){"use strict";cc._RF.push(e,"69ae6bf2xdJH4I83lVF7U0Y","Enemy");var i=t("Actor");cc.Class({extends:i,properties:{minThrowWeaponInterval:{default:.2,displayName:"\u6700\u5c0f\u4e1f\u64f2\u6b66\u5668\u9593\u9694\u6642\u9593"},maxhrowWeaponInterval:{default:1,displayName:"\u6700\u5927\u4e1f\u64f2\u6b66\u5668\u9593\u9694\u6642\u9593"},isFixTimeThrowWeaapon:{default:!1,displayName:"\u4e1f\u64f2\u6b66\u5668\u6642\u9593\u662f\u5426\u70ba\u96a8\u6a5f"},enemyIndex:{default:1,displayName:"\u6575\u4eba\u7d22\u5f15"}},onLoad:function(){this._super()},gameStart:function(){this.bIsDead=!1,this.startRandomThrow()},gameSettle:function(){this.node.stopAllActions(),this.bIsDead=!0,this.bIsHitted=!1},startRandomThrow:function(){var t=this.isFixTimeThrowWeaapon?this.minThrowWeaponInterval:this.minThrowWeaponInterval+(this.maxhrowWeaponInterval-this.minThrowWeaponInterval)*cc.random0To1(),e=cc.sequence(cc.callFunc(this.playWalkAnime,this),cc.delayTime(t),cc.callFunc(this.emitThrowWeaponEvent,this),cc.callFunc(this.playThrowAnime,this),cc.delayTime(.5),cc.callFunc(this.startRandomThrow,this));this.node.runAction(e)},onHitted:function(){this.animation.play(this.animeHitAndDeadName),this.node.runAction(cc.sequence(cc.delayTime(this.recoverTime),cc.callFunc(this.onHittedEnd,this)))},onHittedEnd:function(){this._super(),this.bIsDead},playThrowAnime:function(){this.node.stopAction(this.randomMoveAction),this.animation.play(this.animeThrowName)},playWalkAnime:function(){this.animation.play(this.animeMoveName)}}),cc._RF.pop()},{Actor:"Actor"}],Exploding:[function(t,e,n){"use strict";cc._RF.push(e,"1fe10MXujFKaYmHWjfmi+xK","Exploding"),cc.Class({extends:cc.Component,properties:{collisionEventHandler:{default:[],type:[cc.Component.EventHandler]}},onLoad:function(){this.arrCollisionObjects=[]},gameWaitStart:function(){this.node.getComponent("cc.Animation").stop(),this.node.active=!1},enableCollision:function(t){cc.director.getCollisionManager().enabled=t},onCollisionEnter:function(t,e){var n=t.node.getComponent("Animal");this.arrCollisionObjects.push(n.animalType);var i=e.world;i.aabb,i.preAabb,i.transform,i.radius,i.position,i.points},onCollisionStay:function(t,e){},onCollisionExit:function(t,e){},onExplodingStart:function(){cc.log("Exploding Start"),this.arrCollisionObjects=[],this.enableCollision(!0)},onExplodingEnd:function(){cc.log("Exploding End"),this.emitCollisionEvent(this.arrCollisionObjects),this.enableCollision(!1)},emitCollisionEvent:function(t){for(var e=0;e<this.collisionEventHandler.length;e++)this.collisionEventHandler[e].emit([t])}}),cc._RF.pop()},{}],Model:[function(t,e,n){"use strict";cc._RF.push(e,"5c153vdUaRJaqsCkNh+DAGp","Model");var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o="color: white; background: #E5A93E; font-size: 120%",s=(t("Actions"),cc.Class({extends:cc.Component,editor:{disallowMultiple:s},properties:{_numberDigits:0,numberDigits:{get:function(){return this._numberDigits},set:function(t){this._numberDigits=t,this.onNumberDigitsChange()},tooltip:"\u7576\u5c6c\u6027\u70ba\u6578\u5b57\u985e\u578b\u6642\u3002\u683c\u5f0f\u5316\u7684\u5c0f\u6578\u9ede\u6578\u91cf"}},onLoad:function(){cc.log("%c"+cc.js.getClassName(this),o,"1.onLoad");var t=this.node.getComponentsInChildren(cc.Label),e=this.node.getComponentsInChildren(cc.EditBox),n=this.node.getComponentsInChildren(cc.RichText),i=[].concat(t).concat(e).concat(n);this._fields={},i.forEach(function(t){var e=t.node.name.trim().toLowerCase();this._fields[e]=this._fields[e]||[],this._fields[e].push(t)},this)},onEnable:function(){cc.log("%c"+cc.js.getClassName(this),o,"2.onEnable")},onAfterSceneLaunch:function(){cc.log("%c"+cc.js.getClassName(this),o,"3.onAfterSceneLaunch")},start:function(){cc.log("%c"+cc.js.getClassName(this),o,"4.start")},onBeforeSceneLoading:function(){cc.log("%c"+cc.js.getClassName(this),o,"5.onBeforeSceneLoading")},onDisable:function(){cc.log("%c"+cc.js.getClassName(this),o,"6.onDisable"),TweenLite.killTweensOf(this)},onDestroy:function(){cc.log("%c"+cc.js.getClassName(this),o,"7.onDestroy")},onNumberDigitsChange:function(){cc.log("%c"+cc.js.getClassName(this),o,"\u4f60\u61c9\u8a72\u8986\u5beb\u8a72\u51fd\u5f0f\uff0c\u7576\u4f4d\u6578\u6539\u8b8a\u6642\uff0c\u9700\u8981\u66f4\u65b0\u7684\u6578\u5b57\u985e\u985e\u578b")},setProp:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;if(!(this[t]instanceof Function))return i(this[t])==(void 0===e?"undefined":i(e))&&(this[t]=e,this.refreshProp(t,n,o)),this},refreshProp:function(t){!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=this[t];n=cc.js.isNumber(n)?n.toFixed(e>=0?e:this.numberDigits):n,this._update_prop(t,n)},refreshPropTo:function(t,e){!(arguments.length>2&&void 0!==arguments[2])||arguments[2];var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;e=cc.js.isNumber(e)?e.toFixed(n>=0?n:this.numberDigits):e,this._update_prop(t,e)},refreshProps:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.forEach(function(t){if("string"==typeof t){var e=this[t];this._update_prop(t,e)}},this),this},_update_prop:function(t,e){var n="$"+t.trim().toLowerCase();this._fields[n]&&this._fields[n].forEach(function(t){t.string=e})}}));cc.log("CLASS Model Loaded"),cc._RF.pop()},{Actions:"Actions"}],Mouse:[function(t,e,n){"use strict";cc._RF.push(e,"7baf23vcldBYK1gn2ETPjVM","Mouse"),cc.Class({extends:cc.Component,properties:{animName:"mouserun",runAnimation:{type:cc.Animation,visible:!1,default:null},moveSpeed:{default:100,type:cc.Float,visible:!1},maxMoveSpeed:{default:400,type:cc.Float,visible:!1},minMoveSpeed:{default:150,type:cc.Float,visible:!1},waitTime:{default:2,type:cc.Integer,visible:!1},initScaleX:{default:0,visible:!1,type:cc.Float},direction:{default:-1,type:cc.Integer,displayName:"\u65b9\u5411(-1\u671d\u5de61\u671d\u53f3)"},leftBoundPosition:{default:null,type:cc.Node,visible:!0},isInCage:{default:!1,visible:!1}},onLoad:function(){this.runAnimation=this.node.getComponent("cc.Animation"),this.runAnimation.stop(),this.initScaleX=this.node.scaleX,this.playWait=cc.callFunc(this.startPlayWait,this),this.finished=cc.callFunc(this.startMoveAction,this),this.lastMoveDirection=null},start:function(){},startPlayWait:function(){this.runAnimation.play("mouseStop")},testDebug:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.startRandomMove,this)},startRandomMove:function(t){this.runAnimation.play(this.animName),this.startMoveAction()},startMoveAction:function(){this.runAnimation.play(this.animName),this.moveAction=this.createMoveAction(),this.node.runAction(this.moveAction)},createMoveAction:function(){var t=void 0,e=void 0,n=void 0,i=void 0,o=void 0,s=1*cc.random0To1()-1;return s=Math.floor(s),this.lastMoveDirection==s&&(s*=-1),this.lastMoveDirection=s,this.moveSpeed=cc.random0To1()*(this.maxMoveSpeed-this.minMoveSpeed)+this.minMoveSpeed,s<0?(t=cc.scaleTo(0,-1*this.direction*this.initScaleX,this.node.scaleY),o=this.leftBoundPosition.x+50+150*cc.random0To1(),e=(n=Math.abs(o-this.node.x))/this.moveSpeed,i=cc.moveTo(e,o,this.node.y)):(o=(o=this.node.parent.width*this.node.parent.scaleX/2)-150*cc.random0To1()-50,n=Math.abs(o-this.node.x),t=cc.scaleTo(0,1*this.direction*this.initScaleX,this.node.scaleY),e=n/this.moveSpeed,i=cc.moveTo(e,o,this.node.y)),cc.sequence(t,i,this.playWait,cc.delayTime(this.waitTime),this.finished)},stopRandomMove:function(){this.runAnimation.stop(),this.stopAction(this.moveAction)},startMoveToCage:function(t){this.node.stopAction(this.moveAction),this.runAnimation.play(this.animName),this.moveAction=this.getMoveToCageAction(),this.node.runAction(this.moveAction)},getMoveToCageAction:function(){var t,e,n,i;this.moveSpeed=cc.random0To1()*(this.maxMoveSpeed-this.minMoveSpeed)+this.minMoveSpeed,t=cc.scaleTo(0,-1*this.direction*this.initScaleX,this.node.scaleY),n=this.leftBoundPosition.x+10,i=Math.abs(n-this.node.x)/this.moveSpeed;var o=cc.sequence(cc.delayTime(i-.2),cc.fadeOut(.2));return e=cc.spawn(cc.moveTo(i,n,this.node.y+5),o,cc.scaleBy(i,.6,.6)),this.finished=cc.callFunc(this.sendingMoveBacked,this),cc.sequence(t,e,this.finished)},sendingMoveBacked:function(){this.isInCage=!0,this.node.emit("moveFinish")},update:function(t){}}),cc._RF.pop()},{}],PlayStop:[function(t,e,n){"use strict";cc._RF.push(e,"7cb5bSKxZFM0pAvq3K9f6K2","PlayStop"),cc.Class({extends:cc.Component,properties:{animeStartEvent:{default:[],type:[cc.Component.EventHandler],displayName:"\u52d5\u756b\u958b\u59cb\u4e8b\u4ef6"},animeEndEvent:{default:[],type:[cc.Component.EventHandler],displayName:"\u52d5\u756b\u7d50\u675f\u4e8b\u4ef6"}},onLoad:function(){this.animation=this.node.getComponent("cc.Animation")},play:function(t){this.animation&&this.animation.play(t)},stop:function(t){this.animation&&this.animation.stop(t)},onAnimeStart:function(t){for(var e=0;e<this.animeStartEvent.length;e++)this.animeStartEvent[e].emit([t])},onAnimeEnd:function(t){for(var e=0;e<this.animeEndEvent.length;e++)this.animeEndEvent[e].emit([t])}}),cc._RF.pop()},{}],Player:[function(t,e,n){"use strict";cc._RF.push(e,"83042N7+mxEOJR3h1XwemG1","Player");var i=t("Actor"),o=t("Throw");cc.Class({extends:i,properties:{attackInterval:{default:1,displayName:"\u653b\u64ca\u9593\u9694(\u79d2)"},stepPosition:{default:[],type:[cc.Node]}},onLoad:function(){this._super(),this.initAttackInterval=this.attackInterval},changeWeapon:function(t){this.weaponIndex=t.currentTarget.name,"1"==this.weaponIndex?(this.attackInterval=this.inGotsAttackInterval,cc.log("ChangeIngots",this.attackInterval)):(this.attackInterval=this.initAttackInterval,cc.log("ChangeCoins",this.attackInterval)),this.node.stopAllActions(),this.bIsDead=!1,this.bIsHitted=!1,this.node.runAction(cc.sequence(cc.delayTime(this.initAttackInterval),cc.callFunc(this.startAttack,this)))},setIngosAttackInterval:function(t){cc.log("setIngosAttackInterval",t),this.inGotsAttackInterval=t},gameStart:function(){this.node.stopAllActions(),this.bIsDead=!1,this.bIsHitted=!1,this.node.getComponent(o).weaponIndex=1,this.startAttack()},startAttack:function(){this.bIsDead=!1,this.animation.play(this.animeThrowName),this.emitThrowWeaponEvent(),this.node.runAction(cc.sequence(cc.delayTime(this.attackInterval/2),cc.callFunc(this.stopAttack,this),cc.delayTime(this.attackInterval/2),cc.callFunc(this.startAttack,this)))},stopAttack:function(){this.animation.play(this.animeMoveName)},onHittedEnd:function(){this.bIsHitted=!1,this.node.stopAllActions(),this.startAttack()},showStepPosition:function(){for(var t=0;t<this.stepPosition.length;t++)this.stepPosition[t].active=!0},closeStepPosition:function(){for(var t=0;t<this.stepPosition.length;t++)this.stepPosition[t].active=!1}}),cc._RF.pop()},{Actor:"Actor",Throw:"Throw"}],RandomMove:[function(t,e,n){"use strict";cc._RF.push(e,"b206e3lfMdEWb0owkH5rAU7","RandomMove"),cc.Class({extends:cc.Component,properties:{moveRange:{default:null,type:cc.Node},randomMoveSpeed:{default:25,displayName:"\u96a8\u6a5f\u79fb\u52d5\u901f\u5ea6(pixel/sec)"},randomMoveStopTime:{default:1,displayName:"\u96a8\u6a5f\u505c\u6b62\u6642\u9593"}},onLoad:function(){},randomMove:function(){cc.log("Super Random Move")},randomMoveX:function(){var t=(this.moveRange.width-this.node.width)/2,e=cc.random0To1()*t*2-t,n=cc.moveTo(Math.abs(e-this.node.x)/this.randomMoveSpeed,e,this.node.y);this.randomMoveAction=cc.sequence(n,cc.callFunc(this.randomStopX,this),cc.delayTime(this.randomMoveStopTime),cc.callFunc(this.randomMoveX,this)),this.node.runAction(this.randomMoveAction)},randomStopX:function(){}}),cc._RF.pop()},{}],Server:[function(t,e,n){"use strict";cc._RF.push(e,"dc4f4vwW3ZHxbQoYb5KDKKs","Server");var i=cc.Class({extends:cc.Component});if(i._headers=[],i.getResponseHeader=function(t){var e=void 0;return i._headers.forEach(function(n){var i=n.split(":"),o=i.shift(),s=i.join(":");t.toLowerCase()!=o.toLowerCase()||(e=s)}),e},!1===cc.sys.isNative){var o=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");try{o.open("GET",document.location,!0),o.send(null),o.onreadystatechange=function(){o.readyState==o.HEADERS_RECEIVED&&(i._headers=o.getAllResponseHeaders().split("\n"))}.bind(void 0)}catch(t){cc.error(t)}}cc.log("CLASS Server Loaded"),cc._RF.pop()},{}],SettleView:[function(t,e,n){"use strict";cc._RF.push(e,"a284emRQ2FP/6hbH43DXY9A","SettleView"),cc.Class({extends:cc.Component,properties:{arrSettleLabels:{default:[],type:[cc.Label],displayName:"\u7d50\u7b97\u6a19\u7c64"},arrSettlePoint:{default:[],displayName:"\u6bcf\u7a2e\u52d5\u7269\u5206\u6578",type:[cc.Integer]},multiples:{default:1,displayName:"\u5f69\u91d1\u500d\u6578",tooltip:"BG\u7684\u5f69\u91d1\u500d\u6578\u4f9dSymbol\u6578\u4e0d\u540c"}},onLoad:function(){},gameWaitStart:function(){this.node.runAction(cc.hide())},gameSettle:function(t){this.node.runAction(cc.show());for(var e="",n=0;n<t.length;n++)e=t[n]+"X"+this.arrSettlePoint[n]*this.multiples+"="+(this.arrSettlePoint[n]*this.multiples*t[n]).toFixed(2),this.arrSettleLabels[n].string=e},updateSettleWithServer:function(t,e,n){this.node.runAction(cc.show());for(var i="",o=0;o<t.length;o++)i=t[o]+"X"+e[o]+"="+n[o],this.arrSettleLabels[o].string=i}}),cc._RF.pop()},{}],ShowHide:[function(t,e,n){"use strict";cc._RF.push(e,"d5c26HJ4pFC+JMKOpLsiQ4R","ShowHide"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},show:function(){this.node.active=!0},hide:function(){this.node.active=!1}}),cc._RF.pop()},{}],Socket:[function(t,e,n){"use strict";cc._RF.push(e,"f05708Xcs5ETL8I/bnQ8ZqK","Socket");var i="color: white; background: #9966CC; font-size: 120%",o=t("Server"),s=(t("Actions"),cc.Class({extends:cc.Component,statics:{__INSTANCE__:null,__IS_LOCAL_MODE__:!1,__HOST__:"ws://127.0.0.1:8080",__IS_CONNECTED__:!1,on:function(t,e,n){var i=function(t){var i=s.__IS_LOCAL_MODE__?t.detail:t;try{i=JSON.parse(i)}catch(t){i=i}e.call(n,i)};arguments.length>3&&void 0!==arguments[3]&&arguments[3]?s.__INSTANCE__.once(t,i):s.__INSTANCE__.on(t,i)},once:function(t,e,n){s.on(t,e,n,!0)},emit:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{e=JSON.stringify(e)}catch(t){}s.__IS_LOCAL_MODE__?s.__INSTANCE__.emit(t,n||e):s.__INSTANCE__.emit(t,e)}},editor:{disallowMultiple:s},properties:{_host:"ws://127.0.0.1:8080",host:{type:cc.String,get:function(){return this._host},set:function(t){this._host=t}},_localMode:!0,localMode:{type:cc.Boolean,get:function(){return this._localMode},set:function(t){this._localMode=t}}},_createSocket:function(){cc.log("%c"+cc.js.getClassName(this),i,"\u9023\u7dda\u5efa\u7acb\u4e2d...",this.host);var t=o.getResponseHeader("socket-host");t&&(s.__HOST__=t,cc.log("%c"+cc.js.getClassName(this),i,"Have [socket-host] response header: "+t)),cc.log("%c"+cc.js.getClassName(this),i,"Socket\u9023\u7dda\u6a21\u5f0f:",s.__IS_LOCAL_MODE__?"\u672c\u5730":"\u9060\u7aef","("+s.__HOST__+")");var e=void 0;s.__IS_LOCAL_MODE__?(e=new cc.EventTarget,this._connect()):((e=(cc.sys.isNative?SocketIO:window.io).connect(s.__HOST__,{reconnection:!1})).on("connect",this._connect.bind(this)),e.on("disconnect",this._disconnect.bind(this)));return e},onLoad:function(){cc.log("%c"+cc.js.getClassName(this),i,"onLoad"),s.__IS_LOCAL_MODE__=this.localMode;var t=window.getConfig?window.getConfig():null;s.__HOST__=t?"ws://"+t.serverUrl+":"+t.serverPort:this.host,s.__INSTANCE__||(s.__INSTANCE__=this._createSocket())},_connect:function(t){cc.log("%c"+cc.js.getClassName(this),i,"receive: \u9023\u7dda\u6210\u529f"),s.__IS_CONNECTED__=!0},_disconnect:function(t){cc.log("%c"+cc.js.getClassName(this),i,"receive: \u4e2d\u65b7\u9023\u7dda",t),s.__IS_CONNECTED__=!1}}));cc.log("CLASS Socket Loaded"),cc._RF.pop()},{Actions:"Actions",Server:"Server"}],SpawnCoin:[function(t,e,n){"use strict";cc._RF.push(e,"01526ncSeFKA6KzErj7VSx0","SpawnCoin");cc.Class({extends:cc.Component,properties:{animation:{default:null,visible:!1,type:cc.Animation}},onLoad:function(){this.animation=this.node.getComponent("cc.Animation"),this.node.active=!1,cc.log("spawnCoin---:::"+this.animation)},playAnime:function(){this.node.active=!0,this.animation.play()},stopAnime:function(){cc.log("Stop Spawn Coin Anime"),this.node.active=!1,this.animation.stop(),this.node.dispatchEvent(new cc.Event.EventCustom("SpawnCoinAnimeEnd",!0))}});cc._RF.pop()},{}],StartGame:[function(t,e,n){"use strict";cc._RF.push(e,"2f7a8zHx3JCtoLK7wlS6nW7","StartGame");cc.Class({extends:cc.Component,properties:{clickButtonHandler:{default:[],type:[cc.Component.EventHandler]}},onLoad:function(){this.node.active=!1,this.setInputControl()},setInputControl:function(){this.node.on(cc.Node.EventType.TOUCH_START,function(t){cc.log("Touch Start")},this.node),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchStartGame,this)},onTouchStartGame:function(t){for(var e=0;e<this.clickButtonHandler.length;e++)this.clickButtonHandler[e].emit([]);this.showStartGame(!1)},showStartGame:function(t){this.node.active=t},show:function(){this.node.active=!0},close:function(){this.node.active=!1}});cc._RF.pop()},{}],StepMove:[function(t,e,n){"use strict";cc._RF.push(e,"b8168St4lVMAZ2qQSC8VD3s","StepMove"),cc.Class({extends:cc.Component,properties:{stepPositions:{default:[],type:[cc.Node],displayName:"\u6b65\u9032\u4f4d\u7f6e\u9663\u5217"},defaultIndex:{default:0,displayName:"\u9810\u8a2d\u4f4d\u7f6e\u7d22\u5f15"},currIndex:{default:0,displayName:"\u7576\u524d\u4f4d\u7f6e",visible:!1},step:{default:1,displayName:"\u6bcf\u6b21\u6b65\u9032\u591a\u5c11"},leftButton:{default:null,type:cc.Node},rightButton:{default:null,type:cc.Node}},onLoad:function(){this.defaultPosition=this.node.position,this.setDefault(),this.keyListener=cc.EventListener.create({event:cc.EventListener.KEYBOARD,onKeyPressed:this.onKeyPressed.bind(this),onKeyReleased:this.onKeyReleased.bind(this)})},disableMove:function(){cc.eventManager.removeListener(this.keyListener)},enableMove:function(){cc.log("EnableMove::::"),cc.eventManager.addListener(this.keyListener,this.node)},onKeyPressed:function(t,e){switch(t){case cc.KEY.a:case cc.KEY.left:this.direction=-1;break;case cc.KEY.d:case cc.KEY.right:this.direction=1}},onKeyReleased:function(t,e){switch(t){case cc.KEY.a:case cc.KEY.left:this.moveLeft();break;case cc.KEY.d:case cc.KEY.right:this.moveRight()}},setDefault:function(){0!=this.stepPositions.length?(this.currIndex=this.defaultIndex,cc.log("SetDefaultStep:::",this.currIndex),this.node.x=this.stepPositions[this.currIndex].x):cc.log("You don't set step position")},moveRight:function(){this.currIndex=this.currIndex+this.step,0!=this.stepPositions.length?(this.currIndex>=this.stepPositions.length-1?(this.currIndex=this.stepPositions.length-1,this.rightButton.active=!1):this.leftButton.active=!0,this.node.x=this.stepPositions[this.currIndex].x,this.node.rotation=this.stepPositions[this.currIndex].rotation):cc.log("You don't set step position")},moveLeft:function(){this.currIndex=this.currIndex-this.step,0!=this.stepPositions.length?(this.currIndex<=0?(this.currIndex=0,this.leftButton.active=!1):this.rightButton.active=!0,this.node.x=this.stepPositions[this.currIndex].x,this.node.rotation=this.stepPositions[this.currIndex].rotation):cc.log("You don't set step position")}}),cc._RF.pop()},{}],SystemActions:[function(t,e,n){"use strict";cc._RF.push(e,"02f94sabedPZqC2SOt7d8/V","SystemActions");cc.Class({extends:cc.Component,statics:{OPEN_TRANSFER:"OPEN_TRANSFER"}});cc._RF.pop()},{}],SystemController:[function(t,e,n){"use strict";cc._RF.push(e,"4c102VfdStJxJvR8IXAVvMS","SystemController");var i=t("Socket"),o=t("Controller"),s=(t("SystemActions"),t("../tools/UrlTools").getURLParam);cc.Class({extends:o,properties:{},onLoad:function(){this._super(),cc.game.addPersistRootNode(this.node),i.on("authenticate",this._onAuthenticate,this)},start:function(t){this._onLaunched()},_onLaunched:function(){var t=window.getConfig?window.getConfig():null;t&&(this.model.token=t.accessToken,this.model.gameIdentify=t.gameName);var e=s("username");cc.log("%c"+cc.js.getClassName(this),"color: white; background: #70E08C;","\u4f7f\u7528\u8005\u540d\u5b57\uff1a"+e),i.emit("authenticate",{token:this.model.token,username:e||this.model.username,password:this.model.password})},_onAuthenticate:function(t){200==t.status&&(this.model.setProp("serverVersion",this.model.serverVersion.replace("?",t.version)),this.model.setProp("isForFun",t.isForFun),i.emit("joinGame",{gameIdentify:this.model.gameIdentify}))}});cc._RF.pop()},{"../tools/UrlTools":"UrlTools",Controller:"Controller",Socket:"Socket",SystemActions:"SystemActions"}],SystemModel:[function(t,e,n){"use strict";cc._RF.push(e,"9ad3bMSkd1CAIXcszdzXc6a","SystemModel");var i=t("Model");cc.Class({extends:i,properties:{clientVersion:"Client:",serverVersion:"Server:",isForFun:!1,token:"1234",username:"username",password:"password",gameIdentify:"FORMOSASORICH"},start:function(){this._super(),this.refreshProp("clientVersion")}});cc._RF.pop()},{Model:"Model"}],SystemView:[function(t,e,n){"use strict";cc._RF.push(e,"43c607zOnhKAJ9LrgjfxX64","SystemView");var i=t("View");t("SystemActions"),cc.Class({extends:i,properties:{}});cc._RF.pop()},{SystemActions:"SystemActions",View:"View"}],Throw:[function(t,e,n){"use strict";cc._RF.push(e,"869e3M+/0JG24BHi6pEYy9y","Throw");var i=t("Weapon");cc.Class({extends:cc.Component,properties:{weapon:{type:cc.Node,default:null,displayName:"\u6b66\u5668\u5be6\u9ad4"},maxWaponNumber:10,weapons:{default:[],type:[i],visible:!1},isRandomThrow:{default:!1,displayName:"\u662f\u5426\u96a8\u6a5f\u6295\u64f2",visible:!1}},onLoad:function(){this.currIndex=0;for(var t=void 0,e=0;e<this.maxWaponNumber;e++)(t=cc.instantiate(this.weapon).getComponent("Weapon")).isThrowing=!1,this.throwPosX=t.node.x,this.weapons.push(t);this.weaponIndex=-1,this.arrThrowWeaponRate=new Array,this.arrThrowWeaponRateCopy=new Array,this.setThrowRate(50)},setThrowRate:function(t){this.arrThrowWeaponRate=[],this.weaponIndex=0;for(var e=0;e<t;e++)this.arrThrowWeaponRate.push(0);for(var n=0;n<100-t;n++)this.arrThrowWeaponRate.push(1);this.arrThrowWeaponRateCopy=cc.js.array.copy(this.arrThrowWeaponRate)},getWeaponIndex:function(){var t=void 0;this.arrThrowWeaponRateCopy.length>0?t=Math.floor(cc.random0To1()*this.arrThrowWeaponRateCopy.length):(this.arrThrowWeaponRateCopy=cc.js.array.copy(this.arrThrowWeaponRate),t=Math.floor(cc.random0To1()*this.arrThrowWeaponRateCopy.length));var e=this.arrThrowWeaponRateCopy[t];return cc.js.array.removeAt(this.arrThrowWeaponRateCopy,t),e},throwWeapon:function(){this.currIndex>=this.weapons.length&&(this.currIndex=0),this.weapons[this.currIndex].node.x=this.node.x+this.throwPosX,this.isRandomThrow&&(this.weaponIndex=this.getWeaponIndex()),this.weaponIndex>=0&&this.weapons[this.currIndex].changeWeapon(this.weaponIndex),this.weapons[this.currIndex].throw(),this.weapons[this.currIndex].isThrowing=!0,this.currIndex++},hideWeapon:function(){for(var t=0;t<this.weapons.length;t++)this.weapons[t].hide()},onGameSettle:function(){this.currIndex=0;for(var t=0;t<this.weapons.length;t++)this.weapons[t].isThrowing=!1,this.weapons[t].hide()},doChangeWeapon:function(t){this.weaponIndex=parseInt(t.currentTarget.name);for(var e=0;e<this.weapons.length;e++)!1===this.weapons[e].isThrowing&&this.weapons[e].changeWeapon(parseInt(t.currentTarget.name))}}),cc._RF.pop()},{Weapon:"Weapon"}],TipsTools:[function(t,e,n){"use strict";cc._RF.push(e,"e0d7fmuRE5NWITbNl1Wy8va","TipsTools");var i=cc.Class({extends:cc.Component,properties:{inTime:.5,outTime:1,tipsString:"Tips",size:26,customColor:"#FFFFFF",offsetX:0,offsetY:0},statics:{TIPS_NODE:null,hideTips:function(){i.TIPS_NODE.active=!1}},onLoad:function(){var t=cc.director.getScene();i.TIPS_NODE=t.getChildByName("tipsNode")||new cc.Node,i.TIPS_NODE.name="tipsNode",(i.TIPS_NODE.getComponent(cc.Label)||i.TIPS_NODE.addComponent(cc.Label)).string="";var e=i.TIPS_NODE.getComponent(cc.LabelOutline)||i.TIPS_NODE.addComponent(cc.LabelOutline);e.color=cc.Color.BLACK,e.width=1.6,i.TIPS_NODE.isChildOf(t)||t.addChild(i.TIPS_NODE),i.active=!1},onEnable:function(){this.node.on(cc.Node.EventType.MOUSE_ENTER,this._onMouseEnter,this,!0),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this._onMouseLeave,this,!0)},onDisable:function(){this.node.off(cc.Node.EventType.MOUSE_ENTER,this._onMouseEnter,this,!0),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this._onMouseLeave,this,!0),this.unschedule(i.hideTips),i.hideTips()},_onMouseEnter:function(t){i.TIPS_NODE.active=!1;var e=t.target.convertToWorldSpaceAR(new cc.Vec2(0,0));i.TIPS_NODE.x=e.x+this.offsetX,i.TIPS_NODE.y=e.y+this.offsetY,i.TIPS_NODE.color=(new cc.Color).fromHEX(this.customColor);var n=i.TIPS_NODE.getComponent(cc.Label);n.fontSize=this.size,n.string=this.tipsString,this.unschedule(this._showTips),this.scheduleOnce(this._showTips,this.inTime)},_showTips:function(t){i.TIPS_NODE.active=!0,this.unschedule(i.hideTips),this.scheduleOnce(i.hideTips,this.outTime)},_onMouseLeave:function(t){this.unschedule(this._showTips),this.unschedule(i.hideTips),i.hideTips()}});cc._RF.pop()},{}],ToggleExt:[function(t,e,n){"use strict";cc._RF.push(e,"7013dOCmRdKh5/raI0mB442","ToggleExt"),cc.Class({extends:cc.Component,editor:{executeInEditMode:!0},properties:{uncheckMark:cc.Sprite},onLoad:function(){this.uncheckMark&&(this.uncheckMark.node.scale=1)},onEnable:function(){this.node.on("toggle",this._onToggle,this)},onDisable:function(){this.node.off("toggle",this._onToggle,this)},_onToggle:function(t){var e=t;this.uncheckMark&&(this.uncheckMark.node.scale=e.isChecked?0:1)}}),cc._RF.pop()},{}],TransferAction:[function(t,e,n){"use strict";cc._RF.push(e,"cf34deUiatCVKSEfDgGaTIS","TransferAction"),Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var o=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t)}return i(t,null,[{key:"BALANCE_NOTIFY",get:function(){return"BALANCE_NOTIFY"}}]),t}();n.TransferAction=o,cc._RF.pop()},{}],TransferController:[function(t,e,n){"use strict";cc._RF.push(e,"10b7fb5fXRP/ZZfqyBPgujl","TransferController");var i=t("Socket"),o=t("Controller"),s=(t("Model"),t("SystemActions")),a=t("./TransferAction").TransferAction;cc.Class({extends:o,onLoad:function(){this._super(),i.on&&(i.on("authenticate",this._onAuthenticate,this),i.on("transfer",this._onTransfer,this),i.on("playerBalanceNotification",this._onPlayerBalanceNotification,this),i.on("gameBalanceNotification",this._onGameBalanceNotification,this),i.on("joinGame",this._onJoinGame,this))},_onAuthenticate:function(t){200==t.status&&(this.model.setProp("account",t.username),this.model.setProp("isForFun",t.isForFun))},_onTransfer:function(t){cc.log("_onTransfer",t)},_onPlayerBalanceNotification:function(t){200==t.status&&(this.model.setProp("playerBalance",t.playerBalance),this.ctrlAction(a.BALANCE_NOTIFY,t))},_onGameBalanceNotification:function(t){200==t.status&&(this.model.setProp("gameBalance",t.gameBalance),this.model.setProp("gameTotalBalance",t.gameBalance+t.adjust))},_onJoinGame:function(){this.openTransfer()},openTransfer:function(){this.model.isForFun||(i.emit("playerBalanceNotification"),i.emit("gameBalanceNotification"),this.ctrlAction(s.OPEN_TRANSFER))},onViewAction:function(t,e){switch(t){case"TRANSFER":i.emit("transfer",{type:"in",quantity:this.model.gameInputBalance})}},onCtrlAction:function(t,e){switch(t){case s.OPEN_TRANSFER:this.openTransfer()}}});cc._RF.pop()},{"./TransferAction":"TransferAction",Controller:"Controller",Model:"Model",Socket:"Socket",SystemActions:"SystemActions"}],TransferModel:[function(t,e,n){"use strict";cc._RF.push(e,"65ac2hFmqlFXKJ3cMb5E4ex","TransferModel");var i=t("Model");cc.Class({extends:i,properties:{account:"Guest",playerBalance:0,gameBalance:0,gameInputBalance:0,gameTotalBalance:0,isForFun:!1},start:function(){this._super(),this.refreshProps("account","playerBalance","gameBalance","gameInputBalance","gameTotalBalance")}});cc._RF.pop()},{Model:"Model"}],TransferView:[function(t,e,n){"use strict";cc._RF.push(e,"eebceDxxo1Nz6JPFam58FEi","TransferView");var i=t("View"),o=(t("Model"),t("SystemActions"),t("./TransferAction").TransferAction);cc.Class({extends:i,properties:{sliderFullbar:{default:null,type:cc.Node}},onLoad:function(){this._super(),this.block=!0,this._slider=this.getComponentInChildren(cc.Slider),this._slider.enabled=!1,this._slider.node.on("slide",this._onSlide,this),this.sliderFullbar&&(this.sliderFullbar.anchorX=0,this.sliderFullbar.scaleX=this._slider.progress),this._editbox=this.getComponentInChildren(cc.EditBox),this._editbox.node.on("text-changed",this._onTextChanged,this),this._editbox.node.on("editing-did-began",this._onEditingDidBegan,this),this.visible=!0},_onEditingDidBegan:function(){},_onSlide:function(t){var e=this._slider.progress;this.sliderFullbar&&(this.sliderFullbar.scaleX=e);var n=this.model.playerBalance*e;this.model.refreshPropTo("playerBalance",this.model.playerBalance-n),this.model.refreshPropTo("gameTotalBalance",this.model.gameBalance+n),this._editbox.string=n.toFixed(2),this.model.gameInputBalance=n},_onTextChanged:function(t){var e=parseFloat(this._editbox.string)||0;e=e<=0?0:e>this.model.playerBalance?0==this.model.playerBalance?0:this.model.playerBalance:e,this._editbox.string=e.toString();var n=0==e?0:e/this.model.playerBalance;this._slider.progress=n,this.sliderFullbar&&(this.sliderFullbar.scaleX=n),this.model.gameInputBalance=e,this.model.refreshPropTo("playerBalance",this.model.playerBalance-e),this.model.refreshPropTo("gameTotalBalance",this.model.gameBalance+e)},onButtonClick:function(t,e){switch(t){case"@BtnConfirm":this.viewAction("TRANSFER");case"@BtnClose":this._editbox.string="",this.model.gameInputBalance="",this.visible=!1}},onCtrlAction:function(t,e){switch(t){case"OPEN_TRANSFER":this.visible=!0;break;case o.BALANCE_NOTIFY:this._slider.enabled=this.model.playerBalance>0}}});cc._RF.pop()},{"./TransferAction":"TransferAction",Model:"Model",SystemActions:"SystemActions",View:"View"}],UrlTools:[function(t,e,n){"use strict";cc._RF.push(e,"bd0ebJjfZJF/aGbRjvUZgBZ","UrlTools"),Object.defineProperty(n,"__esModule",{value:!0});n.getURLParam=function(t){var e=decodeURIComponent(window.location.search);if(null==(e=e.toLowerCase())||e.length<=1)return null;var n=e.indexOf(t+"=");if(-1==n)return null;n+=t.length+1;var i=e.indexOf("&",n);return-1==i&&(i=e.length),e.substring(n,i)},cc._RF.pop()},{}],View:[function(t,e,n){"use strict";cc._RF.push(e,"5778fXcGB9Go5UQNJjzvEfV","View");var i="color: white; background: #E6503D; font-size: 120%",o="color: white; background: #70E08C;",s=t("Actions"),a=t("Model"),c=cc.Class({extends:cc.Component,editor:{disallowMultiple:c},properties:{_block:cc.Node,block:{default:!1,type:cc.Boolean,notify:function(){this._block&&(cc.log("%c"+cc.js.getClassName(this),i,"\u5275\u5efablock",this.block),this._block.removeFromParent(),this._block.active=this.block,this._block.active&&this.node.addChild(this._block,-1))},tooltip:"\u6ed1\u9f20\u4e8b\u4ef6\u963b\u65b7\u5668\u3002"},blockColor:{default:"#000000",notify:function(){this._block&&(this._block.color=cc.Color.BLACK.fromHEX(this.blockColor))}},blockOpacity:{default:200,range:[0,255,1],notify:function(){this._block&&(this._block.opacity=this.blockOpacity)}},visible:{default:!0,type:cc.Boolean,notify:function(){this.node.scale=this.visible?1:1e-4},tooltip:"\u986f\u793a\u72c0\u614b"},model:{type:a,readonly:!0,get:function(){return this.getComponent(a)},tooltip:"Model \u7d44\u4ef6\u53c3\u8003"}},onLoad:function(){cc.log("%c"+cc.js.getClassName(this),i,"1.onLoad"),cc.director.once(cc.Director.EVENT_BEFORE_SCENE_LOADING,this.onBeforeSceneLoading,this),cc.director.once(cc.Director.EVENT_AFTER_SCENE_LAUNCH,this.onAfterSceneLaunch,this),cc.Canvas.instance.node.on("size-changed",this.onSizeChangeHandler,this),cc.director.once(cc.Director.EVENT_AFTER_SCENE_LAUNCH,this.onAfterSceneLaunch,this),this._createBlock()},onSizeChangeHandler:function(){cc.log("%c"+cc.js.getClassName(this),i,"onSizeChangeHandler")},_createBlock:function(){var t=cc.Canvas.instance.node,e=new cc.Node;e.name=this.name,e.width=t.width,e.height=t.height,e.color=cc.Color.BLACK.fromHEX(this.blockColor),e.opacity=this.blockOpacity;var n=e.addComponent(cc.Sprite);n.type=cc.Sprite.Type.SIMPLE,n.sizeMode=cc.Sprite.SizeMode.CUSTOM,e.addComponent(cc.Button),e.active=!1,this._block=e},onEnable:function(){cc.log("%c"+cc.js.getClassName(this),i,"2.onEnable");this.node.on(cc.Node.EventType.TOUCH_END,this._buttonClickedHandler,this,!0),this.node.on(s.ACTION_FROM_CTRL,this._onCtrlActon,this)},onAfterSceneLaunch:function(){cc.log("%c"+cc.js.getClassName(this),i,"3.onAfterSceneLaunch")},start:function(){cc.log("%c"+cc.js.getClassName(this),i,"4.start")},onBeforeSceneLoading:function(){cc.log("%c"+cc.js.getClassName(this),i,"5.onBeforeSceneLoading");var t=this.getComponent(cc.Canvas);t&&t.destroy()},onDisable:function(){cc.log("%c"+cc.js.getClassName(this),i,"6.onDisable"),this.node.off(cc.Node.EventType.TOUCH_END,this._buttonClickedHandler,this,!0),this.node.off(s.ACTION_FROM_CTRL,this._onCtrlActon,this),TweenLite.killTweensOf(this)},onDestroy:function(){cc.log("%c"+cc.js.getClassName(this),i,"7.onDestroy")},_buttonClickedHandler:function(t){cc.log("%c"+cc.js.getClassName(this),i,"_buttonClickedHandler::::",t.type);var e=t.target.getComponent(cc.Button);e&&e.interactable&&(this.node.emit(s.VIEW_BUTTON_CLICKED,{name:e.node.name,target:e},this.node),this.onButtonClick(e.node.name,e))},onButtonClick:function(t,e){},_onCtrlActon:function(t,e){var n=t;e?(cc.log("%c"+cc.js.getClassName(this),o,"\u63a5\u53d7\u5230\u4f86\u81ea 0 <"+e.name+"> \u7684 "+n.type+" \u4e8b\u4ef6\uff0c\u52d5\u4f5c\u662f "+n.name),this.onCtrlAction(n.name,n.data)):(cc.log("%c"+cc.js.getClassName(this),o,"\u63a5\u53d7\u5230\u4f86\u81ea 1<"+t.target.name+"> \u7684 "+t.type+" \u4e8b\u4ef6\uff0c\u52d5\u4f5c\u662f "+t.detail.name),this.onCtrlAction(t.detail.name,t.detail.data))},onCtrlAction:function(t,e){},viewAction:function(t,e){cc.log("%c"+cc.js.getClassName(this),"color: white; background: #1D8348;","\u9001\u51fa <"+t+"> \u7684 viewAction \u4e8b\u4ef6\uff0c\u8cc7\u6599\u662f "+e);var n=new cc.Event.EventCustom(s.ACTION_FROM_VIEW,!0);n.detail={name:t,data:e},this.node.dispatchEvent(n)}});cc.log("CLASS View Loaded"),cc._RF.pop()},{Actions:"Actions",Model:"Model"}],WaitChoice:[function(t,e,n){"use strict";cc._RF.push(e,"c7004bJbO1Lha1G+dTyjxed","WaitChoice"),cc.Class({extends:cc.Component,properties:{clickWaitChoiceButtonHandler:{default:[],type:[cc.Component.EventHandler]}},onLoad:function(){this.node.active=!1,this.setInputControl()},setInputControl:function(){this.node.on(cc.Node.EventType.TOUCH_START,function(t){cc.log("Touch Start")},this.node),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchWaitChoice,this)},onTouchWaitChoice:function(t){for(var e=0;e<this.clickWaitChoiceButtonHandler.length;e++)this.clickWaitChoiceButtonHandler[e].emit([])},showWaitChoice:function(t){this.node.active=t},show:function(){this.node.active=!0},close:function(){this.node.active=!1}}),cc._RF.pop()},{}],Weapon:[function(t,e,n){"use strict";cc._RF.push(e,"45348Uz/exIaLiX3NzJxyft","Weapon"),cc.Class({extends:cc.Component,properties:{attackPowers:{default:[],type:[cc.Integer],displayName:"\u653b\u64ca\u529b"},weaponItems:{default:[],type:[cc.SpriteFrame],displayName:"\u6b66\u5668\u5716\u6848"},attackPower:{default:0,displayName:"\u653b\u64ca\u529b",visible:!1},throwDistance:{default:500,displayName:"\u4e1f\u64f2\u8ddd\u96e2"},throwDirection:{default:1,displayName:"(1:\u5f80\u4e0a,-1\u5f80\u4e0b)"},throwSpeed:{default:150,displayName:"\u4e1f\u64f2\u901f\u5ea6"},isThrowing:{default:!1,visible:!1},weaponContainer:{default:null,type:cc.Node},weaponIndex:{default:0,visible:!1}},onLoad:function(){this.initY=this.node.y,this.weaponIndex=0,this.isThrowing=!1},show:function(){this.sprite=this.node.getComponent("cc.Sprite");var t=this.weaponItems[this.weaponIndex];this.attackPower=this.attackPowers[this.weaponIndex],this.sprite.spriteFrame=t,this.node.active=!0},throw:function(){this.node.stopAllActions(),this.isThrowing=!0,this.node.active=!0,this.show(),this.node.parent=this.weaponContainer,this.node.y=this.initY;var t=this.throwDirection>0?this.node.y+this.throwDistance:this.node.y-this.throwDistance,e=cc.moveTo(this.throwDistance/this.throwSpeed,new cc.Vec2(this.node.x,t));this.node.runAction(cc.sequence(e,cc.callFunc(this.throwFinish,this)))},changeWeapon:function(t){this.weaponIndex=t,this.sprite=this.node.getComponent("cc.Sprite");var e=this.weaponItems[t];this.attackPower=this.attackPowers[t],this.sprite.spriteFrame=e},throwFinish:function(){this.isThrowing=!1,this.node.stopAllActions(),this.sprite.spriteFrame=null,this.node.active=!1},hide:function(){this.isThrowing=!1,this.node.stopAllActions(),this.node.active=!1}}),cc._RF.pop()},{}],WinPointView:[function(t,e,n){"use strict";cc._RF.push(e,"5be35XhApNDVo5zixhzCvUx","WinPointView"),cc.Class({extends:cc.Component,properties:{winLabels:{default:[],type:[cc.Label]},winNumbers:{default:[],type:[cc.Integer]},winPointAnims:{default:[],type:[cc.Node],displayName:"\u8d0f\u5206\u52d5\u756b\u9663\u5217"},losePointAnims:{default:[],type:[cc.Node],displayName:"\u8f38\u5206\u52d5\u756b\u9663\u5217"}},onLoad:function(){this.hideAnime()},gameStart:function(){this.hideAnime(),this.updateWinPoint(0,0),this.updateWinPoint(1,0),this.updateWinPoint(2,0),this.show()},gameSettle:function(){this.hide(),this.reset()},reset:function(){for(var t=0;t<this.winNumbers.length;t++)this.winNumbers[t]=0},show:function(){this.node.active=!0},hide:function(){this.node.active=!1},hideAnime:function(){for(var t=0;t<this.winPointAnims.length;t++)this.winPointAnims[t].active=!1;for(var e=0;e<this.losePointAnims.length;e++)this.losePointAnims[e].active=!1},playWinAnime:function(t){this.winPointAnims[t].active=!0,this.winPointAnims[t].getComponent("cc.Animation").play()},playLoseAnime:function(t){this.losePointAnims[t].active=!0,this.losePointAnims[t].getComponent("cc.Animation").play()},updateWinPoint:function(t,e){this.winLabels[t]&&(this.winLabels[t].string="X"+e.toString(),this.winNumbers[t]=e)},updateAllWinPoint:function(){for(var t=0;t<this.winLabels.length;t++)this.winLabels[t]="X"+this.winNumbers[t].toString()}}),cc._RF.pop()},{}],Worm:[function(t,e,n){"use strict";cc._RF.push(e,"71c32AOA7dKurRhdYGeYoWI","Worm");var i=t("../Animal");cc.Class({extends:i,properties:{},randomMove:function(){this.randomMoveX()}}),cc._RF.pop()},{"../Animal":"Animal"}],"ng.BigWin":[function(t,e,n){"use strict";cc._RF.push(e,"c7d81BfwYJAcaZluXCKybl6","ng.BigWin");var i=t("View"),o=t("Audio");cc.Class({extends:i,properties:{},onLoad:function(){this._super(),this.visible=!1},playBigWin:function(){cc.log(this.name,"this.playBigWin"),this.visible=!0,this.block=!0,this.show=!1,o.pauseMusic(),o.playSound("BigWin"),this.node.runAction(cc.sequence(cc.delayTime(2.5),cc.callFunc(this.playCoinSound,this)))},playCoinSound:function(){o.playSound("BigWinCoin"),this.show=!0},stopBigWin:function(){cc.log("StopBigWin"),this.visible=!1,this.show=!1,this.node.stopAllActions(),o.stopSound("BigWinCoin"),o.resumeMusic()},onButtonClick:function(t,e){t==this.name&&!0===this.show&&this.stopBigWin()},onCtrlAction:function(t,e){switch(t){case"PLAY_BIGWIN":this.playBigWin();break;case"STOP_BIGWIN":this.stopBigWin()}}}),cc._RF.pop()},{Audio:"Audio",View:"View"}],"ng.FreeGameView":[function(t,e,n){"use strict";cc._RF.push(e,"d494eGlgtVHa6tCLlRkgctC","ng.FreeGameView");var i=t("View"),o=t("Audio");cc.Class({extends:i,properties:{_freeIsBegin:!1,logo:cc.Node,mainScreen:cc.Node,moveAnimation:cc.Animation,bugAnimation:cc.Animation,farmerAnimation1:cc.Animation,farmerAnimation2:cc.Animation,farmerAnimation3:cc.Animation,framerKillerAnimation:cc.Animation,smokeAnimation:cc.Animation,bugDieAnimation:cc.Animation,girlAnimation:cc.Animation,remain:cc.Label,totalWin:cc.Label,_freeSpinWinChips:0},onLoad:function(){this._super(),this.block=!1,this.visible=!1,this._stopAnimation(this.girlAnimation),this._stopAnimation(this.smokeAnimation),this._stopAnimation(this.bugDieAnimation)},_playAnimaiton:function(t,e,n){t.setCurrentTime(0),t.play(),t.node.active=!0;var i=function(){t.off("finished",i,this),e.apply(this,n)}.bind(this);e&&t.on("finished",i,this)},_stopAnimation:function(t){t.stop(),t.setCurrentTime(0),t.node.active=!1},startFreegame:function(){this._freeIsBegin?this._readyEndFreegame():(this.visible=!0,this._readyStartFreegame())},_readyStartFreegame:function(){o.playSound("FG_LOGO"),this.mainScreen.active=!0,this.logo.active=!0,this.totalWin.string="",TweenLite.fromTo(this.logo,1.4,{scale:0},{scale:1,ease:Bounce.easeOut,onComplete:function(){this.logo.active=!1,this._playMoveAnimation(),this.viewAction("FREEGAME_READY")},onCompleteScope:this}),this._freeIsBegin=!0},_playMoveAnimation:function(){this.node.stopAction(this._moveSequence),this._moveSequence=cc.sequence(cc.callFunc(function(){this._playAnimaiton(this.moveAnimation,this._playMoveAnimation)},this),cc.delayTime(5),cc.callFunc(function(){this._playAnimaiton(this.farmerAnimation1)},this),cc.delayTime(11),cc.callFunc(function(){this._playAnimaiton(this.farmerAnimation2)},this),cc.delayTime(24),cc.callFunc(function(){this._playAnimaiton(this.farmerAnimation3)},this)),this.node.runAction(this._moveSequence)},_readyEndFreegame:function(t){this.node.stopAction(this._moveSequence),this._freeSpinWinChips=t,this._stopAnimation(this.farmerAnimation1),this._stopAnimation(this.farmerAnimation2),this._stopAnimation(this.farmerAnimation3),this._playAnimaiton(this.framerKillerAnimation,this._killBugAnimationEnd)},_killBugAnimationEnd:function(){o.playSound("FG_BUGDIED");var t=this.bugAnimation.node.x,e=this.bugAnimation.node.y;this.smokeAnimation.node.x=t,this.smokeAnimation.node.y=e,this._stopAnimation(this.moveAnimation),this._playAnimaiton(this.smokeAnimation,this._smokeAnimationEnd)},_smokeAnimationEnd:function(){o.playSound("FG_GHOST"),this._playAnimaiton(this.bugDieAnimation,this._bugDieAnimationEnd)},_bugDieAnimationEnd:function(){this._stopAnimation(this.smokeAnimation),this._stopAnimation(this.bugDieAnimation),this._stopAnimation(this.framerKillerAnimation),this._freeSpinWinChips>0?(this.girlAnimation.node.active=!0,TweenLite.fromTo(this.girlAnimation.node,.5,{y:-600},{y:0,onComplete:function(){this._girlAnimationEnd()},onCompleteScope:this})):this._freegameOver()},_girlAnimationEnd:function(t){cc.log("freeSpinWinChips",t),this.totalWin.string="",o.playSound("FG_GIRL");var e={value:0};TweenLite.fromTo(e,.5,{value:0},{value:this._freeSpinWinChips,onUpdate:function(t){this.totalWin.string=t.value.toFixed(2)},onUpdateParams:[e],onUpdateScope:this,onComplete:function(){this.node.runAction(cc.sequence(cc.delayTime(2),cc.callFunc(function(){this._freegameOver()},this)))},onCompleteScope:this})},_freegameOver:function(){this.girlAnimation.node.active=!1,this.visible=!1,this.viewAction("FREEGAME_OVER")},_updateRemain:function(t){this.remain.string=t.toString()},onCtrlAction:function(t,e){switch(t){case"START_FREEGAME":this.visible=!0,this._updateRemain(e.freeSpinBalance),this._readyStartFreegame();break;case"UPDATE_FREEGAME":this._updateRemain(e.freeSpinBalance);break;case"END_FREEGAME":this._updateRemain(e.freeSpinBalance),this._readyEndFreegame(e.freeSpinWinChips)}}});cc._RF.pop()},{Audio:"Audio",View:"View"}],"ng.JackpotWin":[function(t,e,n){"use strict";cc._RF.push(e,"e578eSiWfhOAaV75GQJF5Gp","ng.JackpotWin");var i=t("View"),o=t("Audio");cc.Class({extends:i,properties:{},onLoad:function(){this._super(),this.visible=!1},playJackpotWin:function(){cc.log(this.name,"this.playJackpotWin"),this.visible=!0,this.block=!0,this.show=!1,o.pauseMusic(),o.playSound("BigWin"),this.node.runAction(cc.sequence(cc.delayTime(2.5),cc.callFunc(this.playCoinSound,this)))},playCoinSound:function(){o.playSound("BigWinCoin"),this.show=!0},stopJackpotWin:function(){cc.log("stopJackpotWin"),this.visible=!1,this.show=!1,this.node.stopAllActions(),o.stopSound("BigWinCoin"),o.resumeMusic()},onButtonClick:function(t,e){t===this.name&&!0===this.show&&this.stopJackpotWin()},onCtrlAction:function(t,e){switch(cc.log("onCtrlAction >>>>>>>>>>>>>>>",t),t){case"PLAY_JACKPOTWIN":this.playJackpotWin();break;case"STOP_JACKPOTWIN":this.stopJackpotWin()}}}),cc._RF.pop()},{Audio:"Audio",View:"View"}],"ng.NGController":[function(t,e,n){"use strict";cc._RF.push(e,"13768M+Q4ZF+IWLfP+HapPE","ng.NGController");var i=t("Socket"),o=t("Audio"),s=t("SystemActions"),a=t("Controller");cc.Class({extends:a,properties:{_roundIsBegin:!1,_spinReels:[],_winLines:[],_scatterLines:[],_winInfo:null,doBonusGameChoose:[cc.Component.EventHandler],onGainBG1Start:[cc.Component.EventHandler],onBG1ChooseResult:[cc.Component.EventHandler],onGainBG2Start:[cc.Component.EventHandler],onBG2ChooseResult:[cc.Component.EventHandler],onGainBG3Start:[cc.Component.EventHandler],onBG3ChooseResult:[cc.Component.EventHandler],onGainBG4Start:[cc.Component.EventHandler],onBG4ChooseResult:[cc.Component.EventHandler]},onLoad:function(){this._super(),i.on("authenticate",this._onAuthenticate,this),i.on("gameBalanceNotification",this._onGameBalanceNotification,this),i.on("slotMachineJackpotNotification",this._onSlotMachineJackpotNotification,this),i.on("slotMachineSpin",this._onSlotMachineSpin,this),i.on("slotMachineBgChoose",this._onSlotMachineBgChoose,this)},_onAuthenticate:function(t){console.log("_onAuthenticate",t),200==t.status&&this.model.setProp("account",t.username)},_onGameBalanceNotification:function(t){200==t.status&&this.model.setProp("balance",t.gameBalance,!0,2)},_onSlotMachineJackpotNotification:function(t){200==t.status&&(this.model.setProp("grand",t.grand,!0,2),this.model.setProp("major",t.major,!0,2),this.model.setProp("minor",t.minor,!0,2),this.model.setProp("mini",t.mini,!0,2))},_onSlotMachineSpin:function(t){cc.log("_onSlotMachineSpin",t),400==t.status&&(this.model.isAuto=!1,this.enableButtons(),this.scheduleOnce(function(){this.ctrlAction("CLEAR_BETLINE"),this.ctrlAction(s.OPEN_TRANSFER)}.bind(this),.3)),200==t.status&&(this._roundIsBegin=!0,this._spinReels=t.spinReels,this._winLines=t.winLines,this._scatterLines=t.scatterLines,this._winInfo=t.winInfo,this.disableButtons("@Spin","@Maxbet","@Lines","@Bets","@Rate","@Exchange"),this.scheduleOnce(function(){this.model.setProp("roundNumber",t.roundNumber),this.ctrlAction("CLEAR_BETLINE"),this.ctrlAction("SLOT_SPIN",t.spinReels)}.bind(this),.3))},_doSlotMachineSpin:function(){this._roundIsBegin||(this.model.refreshPropTo("totalWin",""),i.emit("slotMachineSpin",{bets:this.model.betsInfo(),spinReels:[{no:1,symbols:["#BG-8","#S1","#BG-8"]},{no:2,symbols:["#S5","#S1","#S6"]},{no:3,symbols:["#S5","#S1","#S1"]},{no:4,symbols:["#S5","#JP","#S5"]},{no:5,symbols:["#S5","#S5","#S7"]}],status:200,winLines:[{no:1,winChips:100,count:3,cells:[2,2,2,0,0]}],winInfo:{totalChips:30},scatterLines:[]}))},disableButtons:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.getComponentsInChildren(cc.Button).forEach(function(t){(0===e.length||e.indexOf(t.node.name)>-1)&&(t.interactable=!1)})},enableButtons:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.getComponentsInChildren(cc.Button).forEach(function(t){(0===e.length||e.indexOf(t.node.name)>-1)&&(t.interactable=!0)})},onButtonClick:function(t,e){switch(t){case"@Spin":this.ctrlAction("STOP_ALL_WINLINE"),this._doSlotMachineSpin();break;case"@Auto":this.model.toggleAuto(),this._doSlotMachineSpin();break;case"@Maxbet":this.ctrlAction("STOP_ALL_WINLINE"),this.model.maxbet(),this.ctrlAction("SHOW_BETLINE",{count:this.model.lines,keep:!0}),this._doSlotMachineSpin();break;case"@Lines":this.ctrlAction("STOP_ALL_WINLINE"),this.model.changeLine(),this.ctrlAction("SHOW_BETLINE",{count:this.model.lines});break;case"@Bets":this.ctrlAction("STOP_ALL_WINLINE"),this.model.changeBet();break;case"@Rate":this.ctrlAction("STOP_ALL_WINLINE"),this.model.changeRate();break;case"@Sound":o.muteSound();break;case"@Music":o.muteMusic();break;case"@Exchange":this.ctrlAction(s.OPEN_TRANSFER);break;case"@Paytable":this.ctrlAction("TOGGLE_PAYTABLE");break;case"@Exit":confirm("\u904a\u6232\u9084\u5728\u9032\u884c\u4e2d\uff0c\u4f60\u78ba\u5b9a\u96e2\u958b\u904a\u6232\u55ce?")&&(window.open("","_self",""),window.close())}},onViewAction:function(t,e){switch(cc.log(cc.js.getClassName(this),"onViewAction::::::::",t,e),t){case"SLOT_ALL_STOP":if(this._winLines.length>0){this.ctrlAction("SHOW_ALL_WINLINE",this._winLines),this._winInfo.totalChips=this._winInfo.totalChips.toFixed(2),this.model.refreshPropTo("totalWin","+"+this._winInfo.totalChips,!0,2);break}case"SHOW_ALL_WINLINE_END":if(this._scatterLines.length>0){switch(this.ctrlAction("SHOW_ALL_SCATTER",this._scatterLines),this._winInfo.bonusGameEntry){case 1:this.schedule(function(){o.playSound("bg1_eagleDown")},.5,0,.7);break;case 2:this.schedule(function(){o.playSound("bg2_dogbark")},.5,1,.7);break;case 4:this.schedule(function(){o.playSound("bg3_bombExploding")},.5,0,1);break;case 8:this.schedule(function(){o.playSound("bg4_changeWeapon")},.5,0,.7)}break}case"SHOW_ALL_SCATTER_END":this.ctrlAction("SHOW_LOOP_WINLINE",this._winLines),this._checkCurrentGameState();break;case"FREEGAME_READY":this._roundIsBegin=!1,this.ctrlAction("UPDATE_FREEGAME",{freeSpinBalance:this._winInfo.freeSpinBalance-1,freeSpinTotalBalance:this._winInfo.freeSpinTotalBalance}),this._doSlotMachineSpin(),o.playMusic("FBGM");break;case"FREEGAME_OVER":this.model.refreshPropTo("totalWin",this._winInfo.freeSpinWinChips,!0,2),o.playMusic("NBGM"),this.scheduleOnce(function(){this._roundEnd()},.2)}},_checkCurrentGameState:function(){var t=this._winInfo;if(t.jackpotWinChips>0&&(this.model.isAuto=!1,this.model.setProp("jpBouns",t.jackpotWinChips),this.ctrlAction("PLAY_JACKPOTWIN"),cc.log(" ======================= PLAY_JACKPOTWIN")),t.bonusGameEntry>0){var e={choose:t.bonusGameChoose,multiply:t.bonusGameMultiply,bgInfo:t.bgInfo};switch(this.model.setProp("roundNumber",t.bonusRoundNumber),t.bonusGameEntry){case 1:this.onGainBG1Start[0].emit([e]);break;case 2:this.onGainBG2Start[0].emit([e]);break;case 4:this.onGainBG3Start[0].emit([e]);break;case 8:this.onGainBG4Start[0].emit([e])}}else t.freeSpinTotalBalance>0?t.freeSpinBalance==t.freeSpinTotalBalance?(cc.log("\u9032\u5165FG\u6a21\u5f0f"),this.ctrlAction("START_FREEGAME",{freeSpinBalance:t.freeSpinBalance,freeSpinTotalBalance:t.freeSpinTotalBalance})):t.freeSpinBalance>0?(this._roundIsBegin=!1,this._doSlotMachineSpin(),this.ctrlAction("UPDATE_FREEGAME",{freeSpinBalance:t.freeSpinBalance-1,freeSpinTotalBalance:t.freeSpinTotalBalance})):0===t.freeSpinBalance&&(this.ctrlAction("STOP_ALL_WINLINE"),this.ctrlAction("END_FREEGAME",{freeSpinBalance:t.freeSpinBalance,freeSpinTotalBalance:t.freeSpinTotalBalance,freeSpinWinChips:t.freeSpinWinChips}),this.model.refreshPropTo("totalWin","")):(4==t.winLevel&&(this.model.isAuto=!1,this.model.setProp("bigBouns",t.totalChips),this.ctrlAction("PLAY_BIGWIN")),this._roundEnd())},_onSlotMachineBgChoose:function(t){switch(this._winInfo.bonusGameEntry){case 1:this.onBG1ChooseResult[0].emit([t]);break;case 2:this.onBG2ChooseResult[0].emit([t]);break;case 4:this.onBG3ChooseResult[0].emit([t]);break;case 8:this.onBG4ChooseResult[0].emit([t])}},slotMachineBgChoose:function(t){cc.log("!!!!!slotMachineBgChoose",t),i.emit("slotMachineBgChoose",{choose:t})},slotMachineBgGameOver:function(t){this.model.refreshPropTo("totalWin",t,!0,2),o.playMusic("NBGM"),this.scheduleOnce(function(){this._roundEnd()},.2)},_roundEnd:function(){i.emit("gameBalanceNotification",{status:200,gameBalance:500}),this.scheduleOnce(function(){this._roundIsBegin=!1,this.model.isAuto?this._doSlotMachineSpin():this.enableButtons()},.2)}});cc._RF.pop()},{Audio:"Audio",Controller:"Controller",Socket:"Socket",SystemActions:"SystemActions"}],"ng.NGModel":[function(t,e,n){"use strict";cc._RF.push(e,"96fbbdSFg9EhqFsiu+yi+lL","ng.NGModel");var i=t("Model"),o=cc.Class({extends:i,statics:{RATE:[.01,.02,.05,.1,.25,.5,1,2,4,10,20,50,100],MAX_BET:20,MAX_LINE:25},properties:{isAuto:{default:!1,notify:function(){this.node.emit("AUTO_CAHNGED",this.isAuto)}},isFreegameMode:!1,roundNumber:"A012BC3-4",grand:0,major:0,minor:0,mini:0,account:"abc",balance:0,totalWin:0,bets:1,lines:1,_rateIndex:0,rate:{readonly:!0,get:function(){return o.RATE[this._rateIndex]}},totalBet:{readonly:!0,get:function(){return this.bets*this.lines*this.rate}},jpBouns:0,bigBouns:0},onLoad:function(){this._super(),this.bets=this.lines=1,this.refreshProps("grand","major","minor","mini"),this.refreshProp("account"),this.refreshProp("totalWin",!0,2),this.refreshProp("balance",!0,2),this.refreshProps("bets","lines","rate"),this.refreshProp("totalBet",!0,2)},toggleAuto:function(){this.isAuto=!this.isAuto},betsInfo:function(){for(var t=[],e=1;e<=this.lines;e++)t.push({no:e,chips:this.bets*this.rate,rate:this.rate});return t},maxbet:function(){this.bets=o.MAX_BET,this.lines=o.MAX_LINE,this.refreshProps("bets","lines"),this.refreshProp("totalBet",!0,2)},changeBet:function(){this.bets=++this.bets>o.MAX_BET?1:this.bets,this.refreshProps("bets"),this.refreshProp("totalBet",!0,2)},changeLine:function(){this.lines=++this.lines>o.MAX_LINE?1:this.lines,this.refreshProps("lines"),this.refreshProp("totalBet",!0,2)},changeRate:function(){this._rateIndex=++this._rateIndex%o.RATE.length,this.refreshProps("rate"),this.refreshProp("totalBet",!0,2)}});cc._RF.pop()},{Model:"Model"}],"ng.NGView":[function(t,e,n){"use strict";cc._RF.push(e,"2fc25jWwsdD5IJ6+s+NiVhR","ng.NGView");var i=t("View"),o=t("Audio");cc.Class({extends:i,properties:{autoToggle:cc.Toggle},onLoad:function(){this._super(),o.playMusic("NBGM"),this.autoToggle.node.on("toggle",this._setToggleState,this),this.node.on("AUTO_CAHNGED",this._setToggleState,this)},_setToggleState:function(t){this.autoToggle.isChecked=this.model.isAuto},onButtonClick:function(t,e){switch(t){case"@Spin":o.playSound("ClickSpin");break;case"@Maxbet":this.model.balance>=this.model.totalBet?o.playSound("ClickMax"):o.playSound("Click");break;case"@Lines":o.playSound("ClickLine");break;case"@Auto":case"@Bets":case"@Rate":case"@Sound":case"@Music":case"@Exchange":case"@Paytable":case"@Exit":o.playSound("Click")}},disableButtons:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.getComponentsInChildren(cc.Button).forEach(function(t){cc.log(e.length,t.node.name),(0===e.length||e.indexOf(t.node.name)>-1)&&(t.interactable=!1)})},enableButtons:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.getComponentsInChildren(cc.Button).forEach(function(t){(0===e.length||e.indexOf(t.node.name)>-1)&&(t.interactable=!0)})}});cc._RF.pop()},{Audio:"Audio",View:"View"}],"ng.PaytableView":[function(t,e,n){"use strict";cc._RF.push(e,"3579fZMmVdHWbto3rFelsWC","ng.PaytableView");var i=t("View"),o=t("Audio");cc.Class({extends:i,properties:{_pageIndex:0,pageSprite:cc.Sprite,pages:[cc.SpriteFrame]},onLoad:function(){this._super(),this.block=!0,this.visible=!1},prevPage:function(){this._pageIndex=--this._pageIndex<0?this.pages.length-1:this._pageIndex,this.updatePage()},nextPage:function(){this._pageIndex=++this._pageIndex%this.pages.length,this.updatePage()},updatePage:function(){this.pageSprite.spriteFrame=this.pages[Math.abs(this._pageIndex)]},toggle:function(){this.visible=!this.visible},close:function(){this.visible=!1},onButtonClick:function(t,e){switch(t){case"@prevPage":o.playSound("Click"),this.prevPage();break;case"@nextPage":o.playSound("Click"),this.nextPage();break;case"@close":o.playSound("Click"),this.visible=!1}},onCtrlAction:function(t,e){switch(t){case"TOGGLE_PAYTABLE":this.toggle()}}});cc._RF.pop()},{Audio:"Audio",View:"View"}],"ng.SlotBetline":[function(t,e,n){"use strict";cc._RF.push(e,"0a10bF/0rpFDqq1d9OiIcqm","ng.SlotBetline");cc.Class({extends:cc.Component,properties:{betlines:[cc.Sprite],isAllShow:!1},onLoad:function(){this.betlines=this.getComponentsInChildren(cc.Sprite),this.betlines.forEach(function(t){t.node.active=!0,t.node.scale=0})},showOneBetline:function(t){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.clearBetlines(),this.betlines[t].node.scale=1},showBetlines:function(t){for(var e=0;e<t;e++)this.betlines[e].node.scale=1},clearBetlines:function(){this.betlines.forEach(function(t){t.node.scale=0},this)}});cc._RF.pop()},{}],"ng.SlotReel":[function(t,e,n){"use strict";cc._RF.push(e,"7e122JO3/ZHlos+zOoBWFib","ng.SlotReel");var i=t("ng.SlotSymbol"),o=t("Audio");cc.Class({extends:cc.Component,properties:{_spinBegin:!1,_spinning:!1,_stopping:!1,_stopBegin:!1,_spinStop:!1,_spinSpeed:50},onLoad:function(){var t=this.getComponentInChildren(cc.Layout);this._spinSpeed=40,this._scroller=t.node,this._scroller.y=this.node.height-this._scroller.height,this._symbols=this.getComponentsInChildren(i)},update:function(t){var e=Math.abs(this._scroller.y-this._spinSpeed)>=this.node.height;this._spinning&&e&&this._swapSymbol([6,7,8],[3,4,5],!0),this._spinning&&(this._scroller.y=(this._scroller.y-this._spinSpeed)%this.node.height)},_swapSymbol:function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=0;i<t.length;i++){var o=t[i],s=e[i];this._symbols[o].symbolIndex=this._symbols[s].symbolIndex,n&&this._symbols[s].randomSymbol()}},_switchSymbolBlur:function(t){this._symbols.forEach(function(e){e.blur=t},this)},_getRandomInt:function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t))+t},setSpinResult:function(t){for(var e=0;e<t.length;e++)this._symbols[e].symbolID=t[e]},playSymbolAnimation:function(t){for(var e=0;e<this._symbols.length;e++)t&1<<e&&this._symbols[e].playAnimation()},stopSymbolAnimation:function(){for(var t=0;t<this._symbols.length;t++)this._symbols[t].stopAnimation()},startSpin:function(){this._spinBegin=!0,this._scroller.y=0,this._swapSymbol([6,7,8],[0,1,2]),TweenLite.to(this._scroller,.5,{y:-this.node.height,ease:Back.easeIn.config(1.4),onComplete:function(){this._spinning=!0,this.node.emit("REEL_SPIN",this),this._switchSymbolBlur(!0)},onCompleteScope:this})},stopSpin:function(){this._spinning=!1,this._switchSymbolBlur(!1),this._scroller.y=-this.node.height,o.playSound("SpinStop"),TweenLite.to(this._scroller,.45,{y:this.node.height-this._scroller.height,ease:Back.easeOut.config(1),onComplete:function(){this._spinBegin=!1,this._spinning=!1,this.node.emit("REEL_STOP",this)},onCompleteScope:this})},startOrStop:function(){this._spinBegin?this.stopSpin():this.startSpin()}}),cc._RF.pop()},{Audio:"Audio","ng.SlotSymbol":"ng.SlotSymbol"}],"ng.SlotSymbol":[function(t,e,n){"use strict";cc._RF.push(e,"48cfb6ZUP9BAb/wko3yRSVU","ng.SlotSymbol"),cc.Class({extends:cc.Component,properties:{_symbolID:"",symbolID:{get:function(){return this._symbolID},set:function(t){this._symbolID=t,this._symbolIndex=this.symbolLabel.indexOf(this._symbolID),this._updateSymbol()}},_symbolIndex:0,symbolIndex:{get:function(){return this._symbolIndex},set:function(t){this._symbolIndex=t,this._symbolID=this.symbolLabel[this._symbolIndex],this._updateSymbol()}},blur:{default:!1,notify:function(){this._updateSymbol()}},_symbolSpriteNode:cc.Node,_symbolBorderNode:cc.Node,symbolLabel:[cc.String],symbolSpin:[cc.SpriteFrame],symbolBlur:[cc.SpriteFrame],symbolAnimation:[cc.AnimationClip]},onLoad:function(){this._symbolSpriteNode=this.node.getChildByName("SPRINT"),this._symbolBorderNode=this.node.getChildByName("BORDER");var t=this._symbolSpriteNode.getComponent(cc.Animation);this.symbolAnimation.forEach(function(e){t.addClip(e)}),this.randomSymbol()},randomSymbol:function(){this.symbolIndex=this._getRandomInt(0,this.symbolLabel.length)},playAnimation:function(){var t=this._symbolSpriteNode.getComponent(cc.Animation);t.currentClip=this.symbolAnimation[this.symbolIndex],t.play(t.currentClip.name,0),this._symbolBorderNode.getComponent(cc.Animation).play()},stopAnimation:function(){this._symbolSpriteNode.getComponent(cc.Animation).stop(),this._updateSymbol(),this._symbolBorderNode.getComponent(cc.Animation).stop(),this._symbolBorderNode.getComponent(cc.Sprite).spriteFrame=null},_getRandomInt:function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t))+t},_updateSymbol:function(){var t=this._symbolSpriteNode.getComponent(cc.Sprite);this.blur?t.spriteFrame=this.symbolBlur[this.symbolIndex]:t.spriteFrame=this.symbolSpin[this.symbolIndex]}}),cc._RF.pop()},{}],"ng.SlotView":[function(t,e,n){"use strict";cc._RF.push(e,"fed46joMw5MnIchs4iyOu2P","ng.SlotView");var i=t("ng.SlotReel"),o=t("View"),s=t("Audio"),a=t("ng.SlotBetline");cc.Class({extends:o,properties:{_spinBegin:!1,_spinning:!1,_stopBegin:!1,_stopping:!1},onLoad:function(){this._super(),this._reels=this.getComponentsInChildren(i),this._slotbetline=this.getComponentInChildren(a),this._totlChips=this.getComponentInChildren(cc.Label),this._totlChips.string=""},start:function(){},_onReelSpin:function(t){var e=t;this._reels.indexOf(e)==this._reels.length-1&&(this._spinning=!0)},_onReelStop:function(t){var e=t;this._reels.indexOf(e)==this._reels.length-1&&(this._spinBegin=!1,this._spinning=!1,this._stopBegin=!1,this._stopping=!1,this.viewAction("SLOT_ALL_STOP"))},startAll:function(t){this._spinBegin||(this._spinBegin=!0,s.playSound("SpinStart",!0),this._reels.forEach(function(t,e){t.startSpin(),t.node.once("REEL_SPIN",this._onReelSpin,this),t.node.once("REEL_STOP",this._onReelStop,this)},this),t.forEach(function(t){var e=t.no-1;this._reels[e].setSpinResult(t.symbols)},this),this.scheduleOnce(function(){this.stopAll()},1))},stopAll:function(){this._stopBegin||(this._stopBegin=!0,this._reels.forEach(function(t,e){this.scheduleOnce(function(){t.stopSpin()},.3*e)},this))},startOrStopAll:function(){this._spinning?this.stopAll():this.startAll()},onCtrlAction:function(t,e){switch(t){case"SLOT_SPIN":this.stopAllWinline(),this.startAll(e);break;case"SHOW_BETLINE":this._slotbetline.unschedule(this._slotbetline.clearBetlines),this._slotbetline.showBetlines(e.count),this._slotbetline.scheduleOnce(this._slotbetline.clearBetlines,1);break;case"SHOW_ALL_SCATTER":s.playSound("Winline"),this.showScatter(e);break;case"SHOW_ALL_WINLINE":s.playSound("GetWin"),this.showAllWinline(e);break;case"SHOW_LOOP_WINLINE":this.loopShowOneWinline(e);break;case"STOP_ALL_WINLINE":this.stopAllWinline();break;case"CLEAR_BETLINE":this._slotbetline.clearBetlines()}},showScatter:function(t){this.stopAllWinline(),t.forEach(function(t){this.showOneBetlineSymbol(t)},this),this.node.runAction(cc.sequence(cc.delayTime(2),cc.callFunc(function(){this.viewAction("SHOW_ALL_SCATTER_END"),this.stopAllWinline()},this)))},showOneBetlineSymbol:function(t){t.cells.forEach(function(e,n){n<t.count&&this._reels[n].playSymbolAnimation(e)},this)},stopSymbolAnimation:function(){this._reels.forEach(function(t,e){t.stopSymbolAnimation()},this)},showAllWinline:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=0;t.forEach(function(t){this._slotbetline.showOneBetline(t.no-1,!1),n+=t.winChips,this.showOneBetlineSymbol(t)},this),this._totlChips.node.active=!0;var i={value:0,scale:0};TweenLite.fromTo(i,.7,{value:0,scale:.7},{value:n,scale:1,ease:Back.easeOut.config(1.5),onUpdate:function(t){this._totlChips.string=t.value.toFixed(2),this._totlChips.node.scale=t.scale},onUpdateParams:[i],onUpdateScope:this,onComplete:function(){this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){e&&this.viewAction("SHOW_ALL_WINLINE_END")},this)))},onCompleteScope:this})},loopShowOneWinline:function(t){if(0!=t.length){this.node.stopActionByTag("LOOP_SHOWONE_WINLINE");var e=0,n=cc.repeatForever(cc.sequence(cc.repeat(cc.sequence(cc.delayTime(1.5),cc.callFunc(function(){var n=e++%t.length,i=t[n];this._slotbetline.showOneBetline(i.no-1),TweenLite.fromTo(this._totlChips.node,.7,{scale:.8},{scale:1,ease:Back.easeOut}),this._totlChips.string=i.winChips.toFixed(2),this.showOneBetlineSymbol(i)},this)),t.length),cc.delayTime(1),cc.callFunc(function(){this.showAllWinline(t,!1)},this)));n.setTag("LOOP_SHOWONE_WINLINE"),this.node.runAction(n)}},stopAllWinline:function(){this.node.stopActionByTag("LOOP_SHOWONE_WINLINE"),this.stopSymbolAnimation(),this._totlChips.node.active=!1,this._totlChips.string="",this._slotbetline.clearBetlines()}});cc._RF.pop()},{Audio:"Audio",View:"View","ng.SlotBetline":"ng.SlotBetline","ng.SlotReel":"ng.SlotReel"}]},{},["Animal","Bonus01View","Eagle","Mouse","StartGame","WaitChoice","BigDog","Bonus02View","Cow","Dog","Door","BombController","BombView","Bonus03Ctrl","Bonus03View","BonusMouse","Exploding","Worm","Actor","Bar","Bonus04View","Enemy","EnemyView","Player","StepMove","Throw","Weapon","BGAudio","BonusController","BonusView","CountDown","PlayStop","RandomMove","SettleView","ShowHide","SpawnCoin","WinPointView","Actions","Audio","Controller","Model","Server","Socket","View","ng.BigWin","ng.FreeGameView","ng.JackpotWin","ng.NGController","ng.NGModel","ng.NGView","ng.PaytableView","ng.SlotBetline","ng.SlotReel","ng.SlotSymbol","ng.SlotView","DisconnecView","SystemActions","SystemController","SystemModel","SystemView","TransferAction","TransferController","TransferModel","TransferView","UrlTools","TipsTools","ToggleExt"]);